"use strict";function moveScroller(){var e=$("#scroller").width(),t=function(){var t=$(window).scrollTop(),n=$("#scroller-anchor").offset().top,r=$("#scroller");t>n?r.height()>$(window).height()?r.css({"position":"fixed","top":"","bottom":"0px","width":e}):r.css({"position":"fixed","top":"0px","bottom":"","width":e}):n>=t&&r.css({"position":"relative","top":"","bottom":""})};$(window).scroll(t).resize(t),t()}function sanitizeAndSplitTags(e,t,n){e=$.trim(e).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");for(var r=e.split(/[\s|,;]+/),i=[],a=0;a<r.length;a++){var o=r[a].toLowerCase();StackExchange.settings.tags.allowNonAsciiTags||(o=StackExchange.helpers.noDiacritics(o)),o=o.replace(/_/g,"-");var s="[^a-z0-9.#+"+(t?"*":"")+(StackExchange.settings.tags.allowNonAsciiTags?"0-9,A-Z,_,a-z,ª,µ,º,À-Ö,Ø-ö,ø-ˁ,ˆ-ˑ,ˠ-ˤ,ˬ,ˮ,Ͱ-ʹ,Ͷ-ͷ,ͺ-ͽ,Ά,Έ-Ί,Ό,Ύ-Ρ,Σ-ϵ,Ϸ-ҁ,Ҋ-ԣ,Ա-Ֆ,ՙ,ա-և,א-ת,װ-ײ,ء-ي,٠-٩,ٮ-ٯ,ٱ-ۓ,ە,ۥ-ۦ,ۮ-ۼ,ۿ,ܐ,ܒ-ܯ,ݍ-ޥ,ޱ,߀-ߪ,ߴ-ߵ,ߺ,ऄ-ह,ऽ,ॐ,क़-ॡ,०-९,ॱ-ॲ,ॻ-ॿ,অ-ঌ,এ-ঐ,ও-ন,প-র,ল,শ-হ,ঽ,ৎ,ড়-ঢ়,য়-ৡ,০-ৱ,ਅ-ਊ,ਏ-ਐ,ਓ-ਨ,ਪ-ਰ,ਲ-ਲ਼,ਵ-ਸ਼,ਸ-ਹ,ਖ਼-ੜ,ਫ਼,੦-੯,ੲ-ੴ,અ-ઍ,એ-ઑ,ઓ-ન,પ-ર,લ-ળ,વ-હ,ઽ,ૐ,ૠ-ૡ,૦-૯,ଅ-ଌ,ଏ-ଐ,ଓ-ନ,ପ-ର,ଲ-ଳ,ଵ-ହ,ଽ,ଡ଼-ଢ଼,ୟ-ୡ,୦-୯,ୱ,ஃ,அ-ஊ,எ-ஐ,ஒ-க,ங-ச,ஜ,ஞ-ட,ண-த,ந-ப,ம-ஹ,ௐ,௦-௯,అ-ఌ,ఎ-ఐ,ఒ-న,ప-ళ,వ-హ,ఽ,ౘ-ౙ,ౠ-ౡ,౦-౯,ಅ-ಌ,ಎ-ಐ,ಒ-ನ,ಪ-ಳ,ವ-ಹ,ಽ,ೞ,ೠ-ೡ,೦-೯,അ-ഌ,എ-ഐ,ഒ-ന,പ-ഹ,ഽ,ൠ-ൡ,൦-൯,ൺ-ൿ,අ-ඖ,ක-න,ඳ-ර,ල,ව-ෆ,ก-ะ,า-ำ,เ-ๆ,๐-๙,ກ-ຂ,ຄ,ງ-ຈ,ຊ,ຍ,ດ-ທ,ນ-ຟ,ມ-ຣ,ລ,ວ,ສ-ຫ,ອ-ະ,າ-ຳ,ຽ,ເ-ໄ,ໆ,໐-໙,ໜ-ໝ,ༀ,༠-༩,ཀ-ཇ,ཉ-ཬ,ྈ-ྋ,က-ဪ,ဿ-၉,ၐ-ၕ,ၚ-ၝ,ၡ,ၥ-ၦ,ၮ-ၰ,ၵ-ႁ,ႎ,႐-႙,Ⴀ-Ⴥ,ა-ჺ,ჼ,ᄀ-ᅙ,ᅟ-ᆢ,ᆨ-ᇹ,ሀ-ቈ,ቊ-ቍ,ቐ-ቖ,ቘ,ቚ-ቝ,በ-ኈ,ኊ-ኍ,ነ-ኰ,ኲ-ኵ,ኸ-ኾ,ዀ,ዂ-ዅ,ወ-ዖ,ዘ-ጐ,ጒ-ጕ,ጘ-ፚ,ᎀ-ᎏ,Ꭰ-Ᏼ,ᐁ-ᙬ,ᙯ-ᙶ,ᚁ-ᚚ,ᚠ-ᛪ,ᜀ-ᜌ,ᜎ-ᜑ,ᜠ-ᜱ,ᝀ-ᝑ,ᝠ-ᝬ,ᝮ-ᝰ,ក-ឳ,ៗ,ៜ,០-៩,᠐-᠙,ᠠ-ᡷ,ᢀ-ᢨ,ᢪ,ᤀ-ᤜ,᥆-ᥭ,ᥰ-ᥴ,ᦀ-ᦩ,ᧁ-ᧇ,᧐-᧙,ᨀ-ᨖ,ᬅ-ᬳ,ᭅ-ᭋ,᭐-᭙,ᮃ-ᮠ,ᮮ-᮹,ᰀ-ᰣ,᱀-᱉,ᱍ-ᱽ,ᴀ-ᶿ,Ḁ-ἕ,Ἐ-Ἕ,ἠ-ὅ,Ὀ-Ὅ,ὐ-ὗ,Ὑ,Ὓ,Ὕ,Ὗ-ώ,ᾀ-ᾴ,ᾶ-ᾼ,ι,ῂ-ῄ,ῆ-ῌ,ῐ-ΐ,ῖ-Ί,ῠ-Ῥ,ῲ-ῴ,ῶ-ῼ,‿-⁀,⁔,ⁱ,ⁿ,ₐ-ₔ,ℂ,ℇ,ℊ-ℓ,ℕ,ℙ-ℝ,ℤ,Ω,ℨ,K-ℭ,ℯ-ℹ,ℼ-ℿ,ⅅ-ⅉ,ⅎ,Ↄ-ↄ,Ⰰ-Ⱞ,ⰰ-ⱞ,Ⱡ-Ɐ,ⱱ-ⱽ,Ⲁ-ⳤ,ⴀ-ⴥ,ⴰ-ⵥ,ⵯ,ⶀ-ⶖ,ⶠ-ⶦ,ⶨ-ⶮ,ⶰ-ⶶ,ⶸ-ⶾ,ⷀ-ⷆ,ⷈ-ⷎ,ⷐ-ⷖ,ⷘ-ⷞ,ⸯ,々-〆,〱-〵,〻-〼,ぁ-ゖ,ゝ-ゟ,ァ-ヺ,ー-ヿ,ㄅ-ㄭ,ㄱ-ㆎ,ㆠ-ㆷ,ㇰ-ㇿ,㐀-䶵,一-鿃,ꀀ-ꒌ,ꔀ-ꘌ,ꘐ-ꘫ,Ꙁ-ꙟ,Ꙣ-ꙮ,ꙿ-ꚗ,ꜗ-ꜟ,Ꜣ-ꞈ,Ꞌ-ꞌ,ꟻ-ꠁ,ꠃ-ꠅ,ꠇ-ꠊ,ꠌ-ꠢ,ꡀ-ꡳ,ꢂ-ꢳ,꣐-꣙,꤀-ꤥ,ꤰ-ꥆ,ꨀ-ꨨ,ꩀ-ꩂ,ꩄ-ꩋ,꩐-꩙,가-힣,豈-鶴,侮-頻,並-龎,ﬀ-ﬆ,ﬓ-ﬗ,יִ,ײַ-ﬨ,שׁ-זּ,טּ-לּ,מּ,נּ-סּ,ףּ-פּ,צּ-ﮱ,ﯓ-ﴽ,ﵐ-ﶏ,ﶒ-ﷇ,ﷰ-ﷻ,︳-︴,﹍-﹏,ﹰ-ﹴ,ﹶ-ﻼ,０-９,Ａ-Ｚ,＿,ａ-ｚ,ｦ-ﾾ,ￂ-ￇ,ￊ-ￏ,ￒ-ￗ,ￚ-ￜ":"")+"-]";o=o.replace(new RegExp(s,"g"),""),o=o.replace(/^[#+-]+/,""),o=o.replace(/[.-]+$/,""),o.length>0&&(-1==i.indexOf(o)||n&&("or"==o||"and"==o||"not"==o))&&i.push(o)}return i}function initTagRenderer(e,t){window.tagRenderer||(window.tagRendererRaw=function(n,r,i){r=r||"",i=i||"a";var a="";r||(e&&$.inArray(n,e)>-1?a="required-tag":t&&$.inArray(n,t)>-1&&(a="moderator-tag"));var o=$("<"+i+">").addClass("post-tag").addClass(a).text(n);return"a"===i.toLowerCase()&&o.attr({"rel":"tag","href":r+"/questions/tagged/"+encodeURIComponent(n),"title":function(e){return"show questions tagged '"+e.tag+"'"}({"tag":n})}),o.outerHTML()},window.tagRenderer=function(e,t,n){return $(tagRendererRaw(e,t,n))})}function showFadingHelpText(e){e.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var e={"wmd-input":"#how-to-format","tagnames":"#how-to-tag","tag-editor":"#how-to-tag","title":"#how-to-title","wmd-input-42":"#how-to-format","edit-comment":"#how-to-comment"},t=$(".wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42, .edit-comment"),n=function(t){var n=$(t);return n.parent().hasClass("tag-editor")?e["tag-editor"]:n.hasClass("wmd-input")?e["wmd-input"]:n.hasClass("edit-comment")?e["edit-comment"]:e[$(t).attr("id")]};t.focus(function(){var e=n(this);t.each(function(){var t=n(this);t!=e&&$(t).hide()});var r=$(e);r.is(":visible")||showFadingHelpText(r)})}!function(e){function t(){}function n(e,t){if(a)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}var r=t.prototype,i=[],a=i.indexOf?!0:!1;r.getListeners=function(e){var t=this._events||(this._events={});return t[e]||(t[e]=[])},r.addListener=function(e,t){var r=this.getListeners(e);return-1===n(t,r)&&r.push(t),this},r.removeListener=function(e,t){var r=this.getListeners(e),i=n(t,r);return-1!==i&&(r.splice(i,1),0===r.length&&(this._events[e]=null)),this},r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"==typeof t)for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));else for(r=n.length;r--;)a.call(this,t,n[r]);return this},r.removeEvent=function(e){return e?this._events[e]=null:this._events=null,this},r.emitEvent=function(e,t){for(var n=this.getListeners(e),r=n.length;r--;)n[r].apply(null,t||i)===!0&&this.removeListener(e,n[r]);return this},"function"==typeof define&&define.amd?define(function(){return t}):e.EventEmitter=t}(this);var StackExchange=StackExchange||{};StackExchange.realtime=function(){function e(){return{"creationfailed":null,"onopen":null,"onmessage":null,"onclose":null,"onerror":null}}function t(t){function n(e,t){tt&&tt.contentWindow&&tt.contentWindow.postMessage({"cmd":e,"data":t},c)}function r(e,t){if(!e.data||!e.data.evt)return s("WARNING: Unknown data received from worker: "+JSON.stringify(e)),void 0;switch(e.data.evt){case"tabId":a=e.data.content,s("this tab gets assigned id "+a);break;case"ws-wasopen":i=!0,o=1,!u&&t.open&&t.open(),u=!0;break;case"ws-onopen":i=!0,o=e.data.content,t.open&&t.open(),u=!0;break;case"ws-onclose":i=!1,u=!1,s("socket has closed"),t.close&&t.close();break;case"ws-onerror":i=!1,u=!1,t.error&&t.error();break;case"ws-onmessage":t.message&&t.message(e.data.content);break;case"ws-creationfailed":t.creationfailed&&t.creationfailed(e.data.content);break;case"log":s("worker says: "+e.data.content);break;case"error":s("Web worker failed");break;default:s("WARNING: Unknown message received from worker: "+e.data.evt)}}var i=!1,a=-1,o=null,u=!1,c=StackExchange.options.realtime.workerIframeDomain,l={"close":function(){n("close")},"send":function(e,t){n("send",{"tabId":e,"message":t})},"open":function(e){n("open",{"endpoint":e,"useMozWebsockets":!("WebSocket"in window)})},"detach":function(e){n("detach",e)},"keepalive":function(e){n("keepalive",e)}};return K||(j=window.onunload,K=!0),window.onunload=function(){j&&j(),-1!==a&&(s("detaching from worker..."),l.detach(a),a=-1)},setInterval(function(){-1===a||J||Q||l.keepalive(a)},1e4),{"on":new e,"isOpen":function(){return i},"readyState":function(){return o},"start":function(){var e=this.on;tt=$("#websocket-worker-iframe")[0],window.onmessage=function(t){"*"===c||t.origin===c?r(t,e):s("WARNING!!! worker iframe origin is not what I expected. Got: "+t.origin+" - Expected: "+c)},tt.contentWindow.postMessage("START",c)},"close":function(){l.close()},"dispose":function(){-1!==a&&l.detach(a),tt=null},"send":function(e){l.send(a,e)},"open":function(){l.open(t)}}}function n(t){function n(){try{return"WebSocket"in window?new WebSocket(t):new MozWebSocket(t)}catch(e){return e.message}}var r;return{"on":new e,"isOpen":function(){return r&&1===r.readyState},"readyState":function(){return r?r.readyState:null},"start":function(){if(!r){var e=this.on,t=n();"string"==typeof t?e.creationfailed&&e.creationfailed(t):(r=t,r.onopen=function(){e.open&&e.open()},r.onclose=function(){e.close&&e.close(),r=null},r.onmessage=function(t){e.message&&e.message(t)},r.onerror=function(){e.error&&e.error(),r=null})}},"close":function(){r&&(r.close(),r=null)},"dispose":function(){this.close()},"send":function(e){r&&r.send(e)},"open":function(){}}}function r(){U&&(U.dispose(),U=null)}function i(e){return!Q&&StackExchange.options.realtime.useWebWorkers&&"undefined"!=typeof SharedWorker?(s("using a shared web worker for web socket connection"),Y=!0,nt||(nt=new t(e))):(s("NOT using a web worker for web socket connection"),Y=!1,new n(e))}function a(e){var t=e.split(","),n=t.length,a=V%n,c=t[a],l=StackExchange.options.realtime.staleDisconnectIntervalInHours;if(null!=c&&0!=c.indexOf("ws://")&&0!=c.indexOf("wss://")&&(c=("https:"===document.location.protocol?"wss://":"ws://")+c),"WebSocket"in window||"MozWebSocket"in window){if(U)return;if(U=new i(c),null===U)return;U.on.open=function(){if(W||(W=!0),V=0,s("WebSocket opened"),U&&1===U.readyState()){var e="",t=StackExchange.options;if(t){var e="|";t.routeName&&(e+=t.routeName.toString()),e+="|",t.user&&t.user.userId&&(e+=t.user.userId.toString()),e+="|",t.user&&t.user.accountId&&(e+=t.user.accountId.toString()),e+="|",t.user&&t.user.rep&&(e+=t.user.rep.toString()),e=e+"|"+window.location.host+"|",t.serverTime&&(e+=t.serverTime.toString()),e+="|",s("analytic: "+e),U.send(e)}}o(),u(),setInterval(F,6e4),l>0&&setTimeout(O,1e3*l*60*60)},U.on.message=function(t){var n=$.parseJSON(t.data||t);if("realtime-broadcast"===n.action){s("broadcast message - "+n.data);var i=$.parseJSON(n.data).a;"killWebSocket"===i||"restartWebSocket"===i?(s("Applying action: "+i),J="killWebSocket"===i,J?r():U.close()):"revertToDirectSocket"===i&&Y&&(Q=!0,s("Direct socket usage forced remotely"),r(),StackExchange.realtime.init(e))}else et.emitEvent(n.action,[n.data])},U.on.close=function(){U=null,s("WebSocket closed"),!J&&5>V&&Z>0&&(V++,Z--,s("reconnect attempt:"+V+" max retries:"+Z),setTimeout(function(){StackExchange.realtime.init(e)},(new Date).getTime()%50/20*1e3))},U.on.error=function(){s("WebSocket failed"),r()},U.on.creationfailed=function(e){s("Sockets disabled - "+e),r()},U.start(),G.length>0&&U&&U.open()}}function o(){if(null!=U&&U.isOpen())for(var e=0,t=G.length;t>e;e++)s("sending "+G[e]),U.send(G[e])}function s(e){(StackExchange&&StackExchange.options&&StackExchange.options.enableLogging||$&&$.cookie&&$.cookie("devlog"))&&console.log("realtime: "+e)}function u(){et.addListener("hb",function(e){s("heartbeat received; responding"),U.send(e)})}function c(e,t){G.push(e),t=t===!1?!1:!0,t&&o()}function l(e,t){et.removeListener(e,t),p(e)}function d(e,t){et.addListener(e,t),c(e)}function p(e){s("unsubscribing "+e);var t=$.inArray(e,G);-1!=t&&(G.splice(t,1),null!=U&&U.isOpen()&&U.send("-"+e))}function h(e,t){var n=e+"-question-"+t;p(n)}function f(e,t){var n=e+"-question-"+t;c(n),et.addListener(n,function(e){if(!StackExchange.realtime.pauseQuestionNotifications){var t=$.parseJSON(e);if(t.acctid!=StackExchange.options.user.accountId)switch(s(n+" "+e),t.a){case"score":C(t);break;case"comment-add":v(t);break;case"answer-add":q(t);break;case"accept":m(t);break;case"unaccept":m(t,!0);break;case"post-edit":T(t);break;case"post-deleted":g(t)}}})}function g(e){var t=e.aId||e.qId,n=!!e.aId,r=n?$("#answer-"+e.aId):$("#question");r.css("opacity",.1);var i=$('<div class="realtime-post-deleted-notification" />').css({"width":r.outerWidth(),"height":r.outerHeight()});i.insertBefore(r);var a=StackExchange.options.user.canSeeDeletedPosts?"This post has been deleted - click to refresh the page":"This post has been deleted and is no longer viewable",o=$("<p>").text(a).appendTo(i);o.click(function(){window.location.reload(!0)}),$(".popup[data-postid="+t+"]").fadeOutAndRemove()}function m(e,t){1!=$("#vote-accepted-"+e.answerid).length&&($(".vote-accepted-on").remove(),t||$('.vote input[value="'+e.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on","title":"The question owner accepted this as the best answer","text":"accepted"})))}function v(e){0==$("#comment-"+e.commentid).length&&StackExchange.comments.realtimeMessage(e.id)}function b(e,t,n,r,i,a,o){var u=e+"-"+t;M=n,X=a,c(u),et.addListener(u,function(e){s("received (active) on "+u);var n=$.parseJSON(e);if(null!=i)for(var a=0;a<i.length;a++)if(-1==$.inArray(i[a],n.tags))return;B(n,r,t),null!=o&&o(n)})}function w(e){c(e+"-qcnt-feed"),et.addListener(e+"-qcnt-feed",function(e){$("div#q-cnt").html(e)}),c(e+"-evc-feed"),et.addListener(e+"-evc-feed",function(e){$("div#evc-cnt").html(e)}),c(e+"-acnt-feed"),et.addListener(e+"-acnt-feed",function(e){$("div#a-cnt").html(e)})}function k(e){var t=e+"-review-dashboard-update";c(t),et.addListener(t,function(e){var t=$.parseJSON(e),n=$('.dashboard-activity[data-review-task="'+t.i+'"]');0==n.find('.dashboard-user[data-user="'+t.u+'"]').length&&(n.find(".dashboard-user:nth-child(6)").remove(),n.css("overflow","hidden"),n.children().css({"left":"-44px"}),n.prepend(t.html).children().animate({"left":0},function(){n.css("overflow","visible")}))})}function x(){if(null!=StackExchange.options.user.accountId){var e=StackExchange.options.user.accountId+"-topbar";c(e),et.addListener(e,function(e){StackExchange.topbar.handleRealtimeMessage(e)})}}function y(e){if(null!=StackExchange.options.user.accountId){var t=e+"-"+StackExchange.options.user.userId+"-reputation";c(t),et.addListener(t,function(e){A(e)})}}function E(e){var t=e+"-suggested-edits-count-update";c(t),et.addListener(t,function(){S()})}function C(e){var t=$('.vote input[value="'+e.id+'"]').siblings(".vote-count-post");t.text()!=e.score&&(t.text(e.score),0==$(":animated").length&&t.fadeTo("fast",.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts())}function A(e){var t=$("#hlinks .reputation-score, .links-container .reputation");t.text()!=e.score&&(0==$(":animated").length&&t.fadeTo("fast",.8).fadeTo("fast",1),t.text(e).attr("title",function(e){return"your reputation: "+e.reputation}({"reputation":e})),t.trigger("reputationchange"))}function S(){$.ajax({"type":"POST","url":"/review/suggested-edit-count","data":{"fkey":StackExchange.options.user.fkey},"dataType":"json","success":function(e){e&&e.count&&_(e.count)}})}function _(e){var t=$(".suggested-edits-count");t.text()!=e&&(0==$(":animated").length&&t.fadeTo("fast",.5).fadeTo("fast",1),t.text(e))}function q(e){if(0==$("#answer-"+e.answerid).length&&(z.push(e.answerid),StackExchange.cardiologist)){if(StackExchange.cardiologist.isHeartBeating()){var t=StackExchange.helpers.DelayedReaction(L,5e3);t.trigger()}else L();StackExchange.cardiologist.notifiedOfNewAnswer()}}function L(){$("#new-answer-activity").remove(),$("#answers-header").prepend(rt)}function T(e){var t=$(".question[data-questionid="+e.id+"], .answer[data-answerid="+e.id+"]");if(!(t.find(".new-post-activity[data-postid="+e.id+"]").length>0)){var n=$('<div class="new-post-activity" data-postid="'+e.id+'">').append($('<a href="#">').text("an edit has been made to this post; click to load")),r=0===t.find(".inline-editor").length,i=function(){$(".new-post-activity[data-postid="+e.id+"]").remove(),r&&t.off("click",i),0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({"postIdsSemiColonDelimited":e.id}),it(t.find(".postcell, .answercell"),e)),$(document).trigger("refreshEdit",e.id)};r&&t.click(i),n.prependTo(t).find("a").click(function(e){return e.stopPropagation(),i(),!1})}}function D(){$("#tabs").show(),$("#new-answer-activity").remove();var e=$("#answers #answers-header"),t=e.find(".answers-subheader h2"),n=parseInt(t.text())+z.length;isNaN(n)&&(n=z.length),t.text(function(e){return 1==e.answerCount?e.answerCount+" Answer":e.answerCount+" Answers"}({"answerCount":n})),$.ajax({"url":"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({"postIdsSemiColonDelimited":z.join(";")})}).done(function(t){var n=$('<div class="dno" />').append(t);n.insertAfter(e).fadeIn(400,function(){n.removeClass("dno"),styleCode(),StackExchange.vote.init($(".question").data("questionid")),n.find(".answer").each(function(){StackExchange.comments.init({"post":$(this)})})})}),StackExchange.question.bindSuggestedEditPopupLinks(),F(),z=[]}function B(e,t,n){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(e.body)||(e.fetch&&$.ajax({"url":"/posts/"+e.id+"/"+n}).done(function(t){e.body=t,H[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid}}),H[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(at),$(".tag-sponsorship").length>0&&$("#question-mini-list, #questions").css("margin-top","0px"),t&&N())}function I(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function N(){var e=[];for(var t in H)H.hasOwnProperty(t)&&e.push(H[t]);for(var n=e.sort(I),r=0;r<n.length;r++){var i=n[r];$("#question-summary-"+i.id).remove(),$(i.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}P(0),null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,M),styleCode(),F(),$(".new-post-activity").remove(),H={}}function P(e){var t=document.title.replace(/^\(\d*\*?\) /,"");e>0&&(t="("+e+") "+t),window.setTimeout(function(){$(document).attr("title",t)},200)}function O(){J=!0,StackExchange.notify.show('Instant updates have been disabled due to inactivity <a href=".">refresh</a> to reconnect',312),U.dispose()}function F(){for(var e=$("span.relativetime, span.relativetime-clean"),t=0;t<e.length;t++)if(e[t].title){var n=R(e[t].title);n&&(e[t].innerHTML=n)}}function R(e){if(null!=e&&20==e.length){e=e.substr(0,10)+"T"+e.substr(11,10);var t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3+StackExchange.options.serverTimeOffsetSec,r=Math.floor(n/86400);if(!(isNaN(r)||0>r||r>=31))return 0==r&&(2>n&&"just now"||60>n&&(X?function(e){return e.seconds+"s ago"}({"seconds":Math.floor(n)}):function(e){return e.seconds+" secs ago"}({"seconds":Math.floor(n)}))||120>n&&(X?"1m ago":"1 min ago")||3600>n&&(X?function(e){return e.minutes+"m ago"}({"minutes":Math.floor(n/60)}):function(e){return e.minutes+" mins ago"}({"minutes":Math.floor(n/60)}))||7200>n&&(X?"1h ago":"1 hour ago")||86400>n&&(X?function(e){return 1==e.hours,e.hours+"h ago"}({"hours":Math.floor(n/3600)}):function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":Math.floor(n/3600)})))}}var M,j,U=null,H={},z=[],V=0,G=[],Z=10,W=!1,X=!1,J=!1,Q=!1,Y=!1,K=!1,et=new EventEmitter,tt=null,nt=null,rt=function(){var e=Object.keys(z).length;0==e&&$("#new-answer-activity").remove();var t=$('<div id="new-answer-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" new answer to this question":e.count+" new answers to this question"}({"count":e})));return t.click(function(){StackExchange.realtime.expandAnswers()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandAnswers(),!1}),t},it=function(e,t){return function(n){var r=$(n).filter(".question, .answer"),i=r.find(".postcell, .answercell"),a=e.closest(".question"),o=a.length>0,s=$("h1 a.question-hyperlink"),u=r.data("title"),c=o&&$.trim(s.text())!=u,l=$(".question-status"),d=150,p=function(e,t){return function(){return $.Deferred(function(n){null==t||t()?e.animate({"opacity":0},d).promise().done(function(){n.resolve()}):n.resolve()})}},h=p(s,function(){return c}),f=p(e),g=p(l);if($.when(h(),f(),g()).done(function(){c&&s.text(u).animate({"opacity":1},d);var t=function(e,t){return new $.Deferred(function(n){t.css({"opacity":0}),e.replaceWith(t),t.animate({"opacity":1},d,function(){n.resolve()})})};t(e,i).done(function(){styleCode(),StackExchange.question.bindSuggestedEditPopupLinks()});var r=$(n).find(".question-status:last");r.length?(l.length||(l=$("<div>").addClass("question-status").insertAfter(a)),t(l,r)):o?l.remove():l.animate({"opacity":1},d)}),window.history){var m=c?function(e){return e.pageTitle+" - "+e.siteName}({"pageTitle":u,"siteName":StackExchange.options.site.name}):document.Title;window.history.replaceState(window.history.state,m,"#"+t.id)}}},at=function(){var e=Object.keys(H).length;P(e);var t=$('<div class="new-post-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" question with new activity":e.count+" questions with new activity"}({"count":e})));return t.click(function(){StackExchange.realtime.expandActiveQuestions()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandActiveQuestions(),!1}),t};return{"init":a,"log":s,"expandActiveQuestions":N,"expandAnswers":D,"subscribeToActiveQuestions":b,"subscribeToQuestion":f,"unsubscribeToQuestion":h,"pauseQuestionNotifications":!1,"subscribeToReputationNotifications":y,"subscribeToSuggestedEdits":E,"updateRelativeDates":F,"subscribeToReviewDashboard":k,"subscribeToTopBarNotifications":x,"subscribeToCounts":w,"genericSubscribe":d,"genericUnsubscribe":l}}(),function(){function e(e,t){for(var n=[],r=[],i={"tag":null,"endOrBlock":function(){r.length&&n.push(r),r=[]},"pushToAndBlock":function(){r.push(i.tag)}},a=0;a<e.length;a++)i.tag=e[a],t(i);return i.tag=null,i.endOrBlock(),n}function t(t,n){switch(n){case"and":return e(t,function(e){switch(e.tag){case"and":break;case"or":e.endOrBlock();break;default:e.pushToAndBlock()}});case"or":return e(t,function(e){switch(e.tag){case"and":e.and=!0;break;case"or":e.and=!1;break;default:e.and||e.endOrBlock(),e.pushToAndBlock(),e.and=!1}});default:throw"unknown mode "+n}}function n(e,n){var r="t_"+e.token;if(g[r])throw"dupe!";var o=e.layout+"-"+e.sort;g[r]=o;var s=f[o];s||(f[o]=s=new u(i(e.layout,e.sort),a(e.layout,e.sort)));var c,l=t(e.requiredTags.length?e.requiredTags:["_FIREHOSE"],e.mode),d=e.filter;d&&(c=function(e){return e.flags&&e.flags.indexOf(d)>=0}),s.subscribe(e.token,l,function(e,t){n({"token":t,"questions":[$(e.body)]})},c)}function r(e){var t="t_"+e,n=g[t];if(n){var r=f[n];if(!r)return StackExchange.debug.log("should have a multiplexer for "+n+" but don't -- that's a bug"),void 0;r.unsubscribe(e),delete g[t]}}function i(e,t){return function(n,r){r._socket_listeners=r._socket_listeners||{};var i=o(n,e,t),a=function(e){var t=JSON.parse(e);"_FIREHOSE"===n&&t.tags.push("_FIREHOSE"),r(t)};r._socket_listeners["t_"+n]=a,StackExchange.realtime.genericSubscribe(i,a)}}function a(e,t){return function(n,r){if(!r._socket_listeners)throw"cannot remove callback that was not added";var i=r._socket_listeners["t_"+n];if(!i)throw"cannot remove callback that was not added";delete r._socket_listeners["t_"+n];var a=o(n,e,t);StackExchange.realtime.genericUnsubscribe(a,i)}}function o(e,t,n){return"_FIREHOSE"===e?StackExchange.options.site.id+"-newnav-"+t+"-questions-"+n:StackExchange.options.site.id+"-newnav-"+t+"-questions-"+n+"-tag-"+e}function s(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.call(n,r,e[r])}function u(e,t){this.subscriptions={},this.layers={"socketLayer":{},"middleLayer":[],"tabLayer":[]},this.manageInputs={"add":e,"remove":t},this.listeners={}}function c(e){var t=e.outputs[0],n=t.node.inputs[t.index];return n[0]}function l(e){if(this.inputs=[],this.outputs=[],this.must_dedupe=e.must_dedupe,e.filter)if("none"===e.filter)this.filter=null;else{if("function"!=typeof e.filter)throw'filter must be "none" or function';this.filter=e.filter}}function d(e){return e.map(function(e){return e=e.slice(),e.sort(),e})}function p(e,t){for(var n=0,r=0;n<e.length&&r<t.length;)e[n]===t[r]?(n++,r++):r++;return n===e.length}function h(e,t){for(var n=0;n<e.length;n++)if(p(e[n],t))return!0;return!1}var f={},g={};StackExchange.realtime.newnav_multiplex={"subscribe":n,"unsubscribe":r},u.prototype.subscribe=function(e,t,n,r){this.unsubscribe(e),this.subscriptions["t_"+e]={"query":d(t),"callback":n,"filter":r},this.dirty()},u.prototype.unsubscribe=function(e){var t="t_"+e,n=this.subscriptions[t];n&&(delete this.subscriptions[t],this.dirty())},u.prototype.dirty=function(){this.refreshInputs()},u.prototype.refreshInputs=function(){var e=[];s(this.subscriptions,function(t,n){var r=t.substring(2),i={"must_dedupe":!0},a=n.filter;a&&(i.filter=function(e,t){return a(t,r)});var o=new l(i);o.addOutputFunction(function(e){n.callback.call(null,e,r)}),n.query.forEach(function(e){o.addInput([e])}),e.push(o)});var t=[],n={};e.forEach(function(e){e.inputs.forEach(function(r,i){var a="t_"+r[0].join("|");n[a]||(n[a]=new l({"must_dedupe":!1}),t.push(n[a])),n[a].addOutput(e,i)})});for(var r,i={},a=t.slice();a.length;){r={};var o,u=-1;a.forEach(function(e){c(e).forEach(function(e){var t="t_"+e,n=(r[t]||0)+1;r[t]=n,n>u&&(u=n,o=e)})});var d=new l({"must_dedupe":!1,"filter":"none"});i["t_"+o]=d,a=a.filter(function(e){return-1==c(e).indexOf(o)?!0:(e.addInput([[o]]),d.addOutput(e,0),!1)})}var p=[],h=[],f=this.layers;for(var g in f.socketLayer)f.socketLayer.hasOwnProperty(g)&&!i[g]&&h.push(g.substring(2));for(var g in i)i.hasOwnProperty(g)&&!f.socketLayer[g]&&p.push(g.substring(2));var m=this.manageInputs,v=this;h.forEach(function(e){m.remove(e,v.listener(e))}),p.forEach(function(e){m.add(e,v.listener(e))}),this.layers.tabLayer=e,this.layers.middleLayer=t,this.layers.socketLayer=i},u.prototype.listener=function(e){var t="t_"+e;if(!this.listeners[t]){var n=this;this.listeners[t]=function(r){var i=n.layers.socketLayer[t];i?i.receive(0,r):StackExchange.debug.log("Multiplexer received question on "+e+" channel. Nobody's listening there.")}}return this.listeners[t]},l.prototype.receive=function(e,t){if(this.must_dedupe){var n=t.tags.slice();n.sort();for(var r=0;r<this.inputs.length;r++)if(h(this.inputs[r],n)){if(r!==e)return;break}if(r===this.inputs.length)throw"deduping found no matching input"}this.outputs.forEach(function(e){(!this.filter||this.filter(e,t))&&(e.func?e.func.call(e.context,t):e.node.receive(e.index,t))},this)},l.prototype.filter=function(e,t){if(e.func)return!0;var n=t.tags.slice();return n.sort(),h(e.node.inputs[e.index],n)},l.prototype.addOutput=function(e,t){this.outputs.push({"node":e,"index":t})},l.prototype.addOutputFunction=function(e,t){this.outputs.push({"func":e,"context":t})},l.prototype.addInput=function(e){var t=this.inputs.length;return this.inputs.push(d(e)),t}}(),StackExchange.anonymous={},StackExchange.topbar=function(){function e(e){StackExchange.options.enableLogging&&console.log("topbar: "+e)}function t(e){for(var t=0;t<m.length;t++){var n=m[t].$button;if(n&&n[0]==e)return!0}return!1}function n(){for(var e=0;e<m.length;e++)m[e].toggle(!1)}function r(t){var n;if(t&&(n=JSON.parse(t))){e("realtime message - "+t);for(var r in n)for(var i=0;i<m.length;i++)if(r==m[i].name){m[i].handleRealtimeMessage(n[r]);break}}}var i=klass({"name":"","url":"","cssClass":"","button":null,"$dialog":null,"$loadingPlaceholder":null,"$preloadedDialog":null,"hasRead":!1}).statics({"$corral":$(".js-topbar-dialog-corral")}).methods({"isLoading":function(){return null!=this.$loadingPlaceholder},"isLoaded":function(){return null!=this.$dialog},"isVisible":function(){var e=this.$dialog||this.$loadingPlaceholder;return null!=e&&e.is(":visible")},"toggle":function(e,t){if("boolean"!=typeof e)throw new Error("showOrHide is a required parameter");if(!e){if(this.isLoading())return this.showOrHide(!1),void 0;if(!this.isLoaded())return}if(this.isLoaded()||this.isLoading()?(e||t||!this.hasRead||this.markAsRead(),this.showOrHide(e)):this.$preloadedDialog?this.loadChildContent():this.loadDialog(),e)for(var n=0;n<m.length;n++)this.button!=m[n]&&m[n].toggle(!1,t)},"showOrHide":function(e){var t=this.$dialog||this.$loadingPlaceholder;t&&t.toggle(e),e&&this.$dialog&&(this.hasRead=!0)},"loadChildContent":function(){var e=this.$preloadedDialog.find(".child-content");if(this.$dialog=this.$preloadedDialog,this.positionDialogUnderButton(),this.showOrHide(!0),this.url){$("<div>",{"class":"child-content-loading"}).addSpinner().appendTo(e);var t=this;this.fetchUrl().done(function(n){e.html(n),t.afterLoad()})}},"loadDialog":function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(i.$corral),this.positionDialogUnderButton(),this.showOrHide(!0);var e=this;this.fetchUrl().done(function(t){e.$dialog=$(t).appendTo(i.$corral),e.afterLoad();var n=e.$loadingPlaceholder.is(":visible");e.positionDialogUnderButton(),e.showOrHide(n)}).always(function(){e.$loadingPlaceholder.remove(),e.$loadingPlaceholder=null})}},"afterLoad":function(){this.$dialog.find(".js-close-button").click(function(){StackExchange.topbar.hideAll()}),StackExchange.gps.bindTrackClicks(this.$dialog)},"getLoadingPlaceholder":function(){var e=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html(),t=this.cssClass+(StackExchange.options.user.isAnonymousNetworkWide?" anon":""),n=['<div class="topbar-dialog ',t,' dno">','<div class="header">',e,"</div>",'<div class="modal-content"/>',"</div>"];return $(n.join(""))},"positionDialogUnderButton":function(){var e=this.button.$button.outerHeight(),t=this.button.$button.offset().left-m[0].$button.offset().left;(this.$dialog||this.$loadingPlaceholder).css({"top":e,"left":t})},"fetchUrl":function(){e("fetching "+this.url);var t=$.ajax({"type":"GET","url":this.url,"dataType":"html"});return t},"markAsRead":function(){this.button.markAsRead(),this.isLoaded()&&this.$dialog.find(".unread-item").removeClass("unread-item")},"handleRealtimeMessage":function(){this.clearLoadedDialog()},"clearLoadedDialog":function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),a=klass({"name":"","selector":"","dialog":null,"$button":null,"onClass":"","unreadCountPrefix":"","queuedUnreadCount":0,"showsOnMouseOver":!1}).methods({"initialize":function(){this.dialog.name=name,this.dialog.button=this,v.push(this.dialog);var e=this;this.$button=$(this.selector),this.$button.click(function(){return e.toggle(),!1}),this.showsOnMouseOver&&this.$button.mouseover(function(){e.showOnMouseOver()}),this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},"toggle":function(e,t){e="boolean"==typeof e?e:!this.$button.hasClass(this.onClass),this.$button.toggleClass(this.onClass,e),this.dialog.toggle(e,t)},"showOnMouseOver":function(){for(var e=!1,t=0;t<m.length;t++){var n=m[t];if(n!=this&&n.showsOnMouseOver&&n.isOn()){e=!0;break}}e&&this.toggle(!0,!0)},"isOn":function(){return this.$button.hasClass(this.onClass)},"markAsRead":function(){this.$button.find(".unread-count").fadeOut();var e=this.$button.data("unread-class");e&&this.$button.removeClass(e),this.dequeuePendingUnreadCount()},"dequeuePendingUnreadCount":function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},"setUnreadCount":function(e){if(void 0===e);else if(0>=e)this.queuedUnreadCount=0,this.isOn()||this.markAsRead();else if(e>0)if(this.isOn())this.queuedUnreadCount=e;else{var t=this.$button.find(".unread-count");t.text(this.unreadCountPrefix+e).fadeIn(),this.addUnreadClass(),this.dialog.clearLoadedDialog()}},"addUnreadClass":function(){var e=this.$button.data("unread-class");e&&this.$button.addClass(e)},"handleRealtimeMessage":function(){}}),o=i.extend({"url":"/topbar/site-switcher/site-list","cssClass":"siteSwitcher-dialog","$searchItems":null,"$pinnedSiteSearchItems":null,"isPreloaded":!0,"$preloadedDialog":i.$corral.find(".siteSwitcher-dialog")}).methods({"afterLoad":function(){this.$dialog.find("#js-site-filter-txt").typeWatch({"highlight":!1,"wait":250,"captureLength":-1,"callback":$.proxy(this.filterSites,this)}),this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{"title":$(".site-icon",this).attr("title").toLowerCase(),"description":$(".site-desc",this).text().toLowerCase(),"hostname":$("a",this).first().attr("href"),"li":this}});var e=this.$dialog;this.$dialog.find("#js-site-filter-txt").focus(function(){var t=e.offset().top+e.height(),n=e.find(".other-sites li:nth-child(2)"),r=n.offset().top+n.height();r>t&&e.animate({"scrollTop":e.scrollTop()+r-t},750)}),StackExchange.options.user.isAnonymous&&!StackExchange.options.user.isAnonymousOnThisSite||!$(".pinned-site-editor-container").length||($(".js-found-sites").css({"width":$("#js-site-search-txt").outerWidth()}),$(".js-found-sites").hide(),this.$dialog.find("#js-site-search-txt").typeWatch({"highlight":!1,"wait":100,"captureLength":-1,"callback":$.proxy(this.findSitesToPin,this)}),this.$dialog.find("#edit-pinned-sites").click($.proxy(this.editPinnedSites,this)),this.$dialog.find("#cancel-pinned-sites").click({"forceListRefresh":$("#save-pinned-sites-btn").is(":enabled")},this.cancelSiteListEdits),this.$dialog.find("#pin-site-btn").click($.proxy(this.pinSite,this)),this.$dialog.on("click",".remove-pinned-site-link",function(){return $(this).parent().remove(),$("#save-pinned-sites-btn").enable(),$("#reset-pinned-sites").show(),!1
}),this.$dialog.find("#save-pinned-sites-btn").click($.proxy(this.savePinnedSites,this)),this.$dialog.find("#reset-pinned-sites").click($.proxy(this.resetPinnedSites,this))),this.supr()},"showOrHide":function(e){this.supr(e)},"pinSite":function(){$("#pin-site-btn").disable();var e=$("#js-site-search-txt").val(),t=$.grep(this.$pinnedSiteSearchItems,function(t){return t.sitename===e});if(!t.length)return $("#pin-site-btn").enable(),void 0;var n=t[0],r=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();if(r.indexOf(n.siteid)>-1)return $("#pin-site-btn").enable(),void 0;var i=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/pin-site","data":{"siteId":n.siteid},"dataType":"html"}).done(function(e){var t=$(e);t.hide(),$(".pinned-site-list").append(t),t.fadeIn("slow"),$("#js-site-search-txt").val(""),$("#save-pinned-sites-btn").enable(),i.toggleSiteListResetLink(!0)}).fail(function(){$("#pin-site-btn").parent().showErrorMessage("Something bad happened; please try again"),$("#pin-site-btn").enable()})},"savePinnedSites":function(){var e=$(".pinned-site-list li .pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray(),t=!$("#reset-pinned-sites").is(":visible")||!e.length;return this.toggleSiteListResetLink(!t),$.ajax({"type":"POST","url":"/topbar/site-switcher/save-pinned-sites","data":{"siteIds":t?[]:e,"fkey":StackExchange.options.user.fkey},"dataType":"html","traditional":!0}).done($.proxy(function(e){$(".my-sites").html(e),this.cancelSiteListEdits(!1),$(".pinned-site-list").data("custom-list",!t),StackExchange.using("gps",function(){StackExchange.gps.track("site_switcher.edit",{})})},this)).fail(function(){$("#save-pinned-sites-btn").parent().showErrorMessage("Something bad happened; please try again")}),!1},"resetPinnedSites":function(){var e=this;return $.ajax({"type":"GET","url":"/topbar/site-switcher/default-active-sites","dataType":"html"}).done(function(t){$(".pinned-site-list").html(t),$("#save-pinned-sites-btn").enable(),e.toggleSiteListResetLink(!1)}).error(function(){$("#reset-pinned-sites").parent().showErrorMessage("Something bad happened; please try again")}),!1},"doSearch":function(e,t,n){var r;t=t.toLowerCase();var i=[];return $.each(e,function(e,n){var r={"index":e,"li":n.li,"item":n},a=n.title.indexOf(t);n.title==t?r.priority=1:0==a?r.priority=2:a>-1?r.priority=3:n.description.indexOf(t)>-1?r.priority=4:n.hostname.indexOf(t)>-1&&(r.priority=5),r.priority&&i.push(r)}),r=i.sort(function(e,t){return e.priority-t.priority||e.index-t.index}),n&&StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{"term":t,"numresults":i.length},!1)}),r},"_findSitesToPin":function(e){var t=$(".js-found-sites"),n=this.$pinnedSiteSearchItems;if(t.empty(),""===e)return t.hide(),$("#pin-site-btn").disable(),void 0;if(n=this.doSearch(n,e,!1),n.length){t.show(),$("#pin-site-btn").enable();var r=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();$.each(n,function(e,n){var i=$('<li class="pinned-site-candidate">'+n.item.sitename+"</li>");r.indexOf(n.item.siteid)>-1?i.addClass("already-pinned-site"):i.click(function(){var e=$(this).text();return $("#js-site-search-txt").val(e),$(".js-found-sites").hide(),!1}),i.appendTo(t)})}},"findSitesToPin":function(e){if(this.$pinnedSiteSearchItems)return this._findSitesToPin(e),void 0;var t=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/all-pinnable-sites","dataType":"json"}).done(function(n){t.$pinnedSiteSearchItems=n,t._findSitesToPin(e)})},"filterSites":function(e){var t=$(".js-other-sites"),n=this.$searchItems;t.empty(),""!=e&&(n=this.doSearch(n,e,!0)),t.append(n.map(function(e){return this&&this.li||e.li}))},"editPinnedSites":function(){$(".header").not("#your-communities-header").css("opacity",.2),$(".modal-content").not("#your-communities-section").css("opacity",.2),$(".my-sites").hide(),$(".pinned-site-editor-container").show(),$("#edit-pinned-sites").hide(),$("#cancel-pinned-sites").show();var e=$(".pinned-site-list");if(""===e.html().trim()){var t=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html();e.append('<li style="text-align:center;">'+t+"</li>"),$.ajax({"type":"GET","url":"/topbar/site-switcher/current-pinned-sites","dataType":"html"}).done(function(t){e.html(t)}).fail(function(){e.showErrorMessage("Something bad happened; please try again")}).always(function(){e.find(".ajax-loader").remove()})}this.toggleSiteListResetLink("true"===e.data("custom-list").toString().toLowerCase());var n=$(".sortable"),r=this;return n.data("isSortable")||StackExchange.loadJqueryUi().done(function(){n.sortable({"axis":"y","update":function(){$("#save-pinned-sites-btn").enable(),r.toggleSiteListResetLink(!0)}}).disableSelection().data("isSortable",!0)}),!1},"toggleSiteListResetLink":function(e){$("#reset-pinned-sites").toggle(e)},"cancelSiteListEdits":function(e){return $(".header").not("#your-communities-header").css("opacity",1),$(".modal-content").not("#your-communities-section").css("opacity",1),$(".my-sites").show(),$("#edit-pinned-sites").show(),$(".pinned-site-editor-container").hide(),$("#cancel-pinned-sites").hide(),$("#save-pinned-sites-btn").disable(),e&&($(".pinned-site-list").empty(),$(".js-found-sites").hide(),$("#js-site-search-txt").val(""),$("#pin-site-btn").disable()),!1}}),s=a.extend({"name":"SiteSwitcher","selector":".js-site-switcher-button","dialog":new o,"showsOnMouseOver":!0,"onClass":"icon-site-switcher-on"}),u=i.extend({"url":"/topbar/inbox","cssClass":"inbox-dialog"}),c=a.extend({"name":"Inbox","selector":".js-inbox-button","dialog":new u,"showsOnMouseOver":!0}).methods({"handleRealtimeMessage":function(e){this.setUnreadCount(e.UnreadInboxCount)}}),l=i.extend({"url":"/topbar/achievements","cssClass":"achievements-dialog"}).methods({"afterLoad":function(){this.alignRep(),this.bindDateGroupToggles(),this.displayUtcTime(),this.bindGpsTracker(),this.supr()},"alignRep":function(){var e=this.$dialog.find(".js-items .js-faux-column"),t=0;e.filter(".js-rep-change").each(function(){var e=$.trim($(this).text()).length;e>t&&(t=e)}),t>0&&e.width(6*(t+1))},"bindDateGroupToggles":function(){this.$dialog.find(".js-date-group-toggle").click(function(){var e=$(this),t=e.closest(".js-date-group"),n=t.find(".js-items"),r=t.find(".rep-site-container");e.find(".date-group-toggle").toggleClass("toggle-hidden"),n.add(r).fadeToggle("fast")}),this.$dialog.find(".rep-site-container").on("click",function(e){e.stopImmediatePropagation()})},"displayUtcTime":function(){var e=this.$dialog,t=function(){var t=new Date;t.setTime(t.getTime()+1e3*StackExchange.options.serverTimeOffsetSec);var n=t.getUTCHours(),r=t.getUTCMinutes();10>n&&(n="0"+n),10>r&&(r="0"+r),e.find(".js-utc-time").text(n+":"+r)};t(),setInterval(t,6e4)},"bindGpsTracker":function(){var e=$("#js-gps-container.js-empty-achiev");e.find("a:first").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:6 })"),e.find("a:last").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:7 })"),StackExchange.gps.bindTrackClicks(e)}}),d=a.extend({"name":"Achievements","selector":".js-achievements-button","dialog":new l,"unreadCountPrefix":"+","showsOnMouseOver":!0}).methods({"handleRealtimeMessage":function(e){var t=0===(e.UnreadRepCount||0)&&e.UnreadNonRepCount>0;t?this.addUnreadClass():this.setUnreadCount(e.UnreadRepCount)}}),p=i.extend({"cssClass":"help-dialog"}).methods({"loadDialog":function(){this.$dialog=$(".js-help-dialog").appendTo(i.$corral),this.positionDialogUnderButton(),this.showOrHide(!0)}}),h=a.extend({"name":"Help","selector":".js-help-button","dialog":new p}),f=i.extend({"url":"/topbar/mod-inbox","cssClass":"modInbox-dialog"}).methods({}),g=a.extend({"name":"ModInbox","selector":".js-mod-inbox-button","dialog":new f}),m=[],v=[];return{"init":function(){window.devicePixelRatio>=1.5&&$(".js-avatar-me").attr("src",function(e,t){return t.replace("?s=24","?s=48")}),m.push(new s),m.push(new c),m.push(new d),m.push(new h),StackExchange.options.user.isModerator&&m.push(new g),$(document).click(function(e){t(e.target)||$.contains(i.$corral[0],e.target)||n()})},"hideAll":n,"handleRealtimeMessage":r}}(),StackExchange.notify=function(){function e(e,t){var n=$("#dismissed-messages");n.val(n.val()+"~"+e+(t?" "+t:"")+"~")}function t(e,t){var n=$("#dismissed-messages").val();return n?new RegExp("~"+e+(t?" "+t:"")+"~").test(n):!1}function n(e,t,n){var r=parseInt($("body").css("margin-top").match(/\d+/)),i=t*r/e;n?$("body:not(.no-message-slide)").animate({"marginTop":i+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",i+"px")}var r=0,i=-1,a="m",o=function(t,a){var o=$("#notify-"+t+(a?"-"+a:""));t==i?u():t>i&&$.post("/messages/mark-as-read",{"messagetypeid":t,"id":a?a:null}),e(t,a),r--,o.fadeOut("fast",function(){n(r+1,r,!0),o.remove(),0===$("#notify-container div").length&&$("#notify-container").hide()})},s=function(e){if(r++,t(e.messageTypeId,e.id))return!1;var n="";e.messageTypeId&&(n=' id="notify-'+e.messageTypeId+(e.id?"-"+e.id:"")+'"');var i="<div"+n+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+e.text+"</span>";if(e.showProfile){var a=encodeURIComponent("/users/"+e.userId+"?tab=badges&sort=recent");i+=" "+function(e){return'See your <a href="'+e.url+'">profile</a>.'}({"url":"/messages/mark-as-read?messagetypeid="+e.messageTypeId+"&returnurl="+a})}i+="</div>";var s=$(i);return e.cssClass&&s.addClass(e.cssClass),s.find(".notify-close").click(function(){e.close&&e.close(),o(e.messageTypeId,e.id)}),$("#notify-container").append(s),$("#notify-container").show(),!0},u=function(e){$.cookie(a,e?e:"0",{"expires":90,"path":"/"})},c=function(){$("#notify-container div").fadeIn("slow")},l=function(){$("body:not(.no-message-slide)").animate({"marginTop":"2.5em"},"fast","linear")},d=function(e,t){var n=$('<div class="link-more">').append($("<a>").text(function(e){return 1==e.numNotifications?"view "+e.numNotifications+" more notification":"view "+e.numNotifications+" more notifications"}({"numNotifications":e})));$("#notify-container").append(n),n.click(function(){n.detach();for(var e=0;e<t.length;e++)s(t[e]);c()})};return{"showMessages":function(e,t){for(var i=0,a=t?2:e.length,o=0;a>o&&o<e.length;o++)s(e[o])&&i++;if(n(r,i,!1),c(),t&&i<e.length){var u=e.slice(a);d(e.length-i,u)}},"show":function(e,t,n){l(),s({"text":e,"messageTypeId":t,"cssClass":n}),c()},"close":o,"getMessageText":function(e){return $("#notify-"+e+" .notify-text").text()}}}();var styleCode=function(){function e(e){var t=$("#prettify-lang").text();return""!=t?(e.addClass(t),!0):!1}return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),StackExchange.ifUsing("snippets",function(){StackExchange.snippets.redraw&&StackExchange.snippets.redraw()});var t=!1;if($("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),t=!0),$(this).hasClass("prettyprint")||e($(this))&&($(this).addClass("prettyprint"),t=!0)}),t){if("undefined"!=typeof jtab)return jtab.renderimplicit(),void 0;StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}$(".spoiler").click(function(){$(this).toggleClass("spoiler")})}}();styleCode.updateLangdivDelayed=StackExchange.helpers.DelayedReaction(function(e){var t=$("#prettify-lang");t.length&&$.get("/api/tags/langdiv",{"tags":e.join(" ")}).done(function(e){e?t.replaceWith(e):t.empty(),StackExchange.MarkdownEditor.refreshAllPreviews(),styleCode()})},1500,{"sliding":!0}),StackExchange.helpers.MagicPopup=function(e){function t(t,r){if($.contains(document.documentElement,t)){var a=$("<div id='"+e.id+"'/>").html(r),o=$("<div />").css({"overflow":"hidden","position":"absolute","z-index":1002,"width":1,"height":1,"top":0,"left":0}).append(a).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(a.attr("id"));var s=e.showing(t,a),u={"left":s.left};s.hasOwnProperty("bottom")?(u.bottom=s.bottom,u.top="auto"):u.top=0|s.top;var c;e.shown&&(c=function(){e.shown(t,a)}),o.css(u).animate({"height":a.outerHeight()+8,"width":a.outerWidth()+8},300,c),n=function(){o.stop().remove(),e.removed&&e.removed(t,a),i=null,n=null},i=StackExchange.helpers.DelayedReaction(n,5);var l=o;s.additional&&(l=l.add(s.additional)),l.hover(i.cancel,i.trigger)}}var n,r,i,a,o={},s=StackExchange.helpers.DelayedReaction(function(r,i){if(!a&&r){var s;e.cache&&"c_"+r in o?s=$.Deferred().resolve(o["c_"+r]):(s=$.ajax({"type":"GET","url":r,"dataType":"html"}),e.cache&&s.done(function(e){o["c_"+r]=e})),s.done(function(e){n&&n(),""!=e&&t(i,e)})}},500);$(document).delegate(e.selector,{"mouseenter":function(){return i&&this===r?(i.cancel(),void 0):(r=this,s.trigger(e.getUrl(this),this),a=!1,!1)},"mouseleave":function(){a=!0,s.cancel(),i&&i.trigger()}})},StackExchange.tagmenu=function(){function e(e){var t=$(e),n=t.attr("href"),r=t.data("tag-menu-tagname");if(!(r||n&&"/"==n.charAt(0)))return null;var i=r||t.text();return i.indexOf("*")>-1?null:(t.attr("title",""),"/tags/"+encodeURIComponent(i)+"/subscriber-info")}function t(e,t){var n=$(e),r=n.offset(),i=n.outerHeight(),a={"left":r.left},o=r.top+i,s=r.left+t.outerWidth();t.height()+o>$(window).height()+$(window).scrollTop()?a.bottom=$(window).height()-r.top-8:a.top=o;var u=Math.max(1024,$(window).width());return s>u&&(a.left-=s-u),a}var n,r,i=function(i){n=i,r||(r=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({"selector":".post-tag:not(.user-tag,.no-tag-menu,.invalid-tag,.job-link)","id":"tag-menu","getUrl":e,"showing":t,"shown":function(e,t){n&&n(t,$(e).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))};return{"init":i,"showing":t}}(),StackExchange.usermenu=function(){function e(e,t){var n=$(e),r=n.find("img:last"),s=r.offset(),u=r.height(),c=r.width(),l=Math.max(c,u),d=64*u/l,p=64*c/l,h=t.find("img:first").css({"width":p,"height":d}),f=h.offset();h.css("visibility","hidden"),i=r.clone().css({"position":"absolute","zIndex":1003,"left":s.left,"top":s.top,"width":c,"height":u}).appendTo("body");var g=function(){return h[0].complete?(h.css("visibility","visible"),i.fadeOutAndRemove(),void 0):(setTimeout(g,100),void 0)};i.animate({"width":p,"height":d,"top":s.top+f.top},200,g),t.trigger("userhovershowing",e),a=!0;var m=t.find(".um-header-info a:not(.um-user-link), .um-about-me a, .um-links a").length>0;return StackExchange.gps.track("user_popup.show",{"is_own":o,"has_links":m}),setTimeout(function(){a&&StackExchange.gps.track("user_popup.read",{"is_own":o,"has_links":m})},2e3),t.on("click",".um-gravatar a, a.um-user-link",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":0,"is_own":o})}),t.on("click",".um-header-info a:not(.um-user-link)",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":1,"is_own":o})}),t.on("click",".um-about-me a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":2,"is_own":o})}),t.on("click",".um-links a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":3,"is_own":o})}),{"top":s.top,"left":s.left-f.left,"additional":i}}function t(e,t){t.trigger("userhovershown")}function n(e){$(e).trigger("userhoverremoved"),i.remove(),a=!1}var r,i,a,o,s=function(){function i(e){var t=$(e),n=t.closest(".user-hover"),r=n.find(".user-details a").attr("href"),i=new RegExp("/users/([^/]+).*$"),a=i.exec(r);return a?(o=StackExchange.options.user.isAnonymous?!1:(0|a[1])>0&&(0|a[1])==(0|StackExchange.options.user.userId),"/users/user-info/"+a[1]):null}r||(r=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({"selector":".user-hover .user-gravatar48, .user-hover .user-gravatar32","getUrl":i,"cache":!0,"id":"user-menu","showing":e,"shown":t,"removed":n}))};return{"init":s}}(),StackExchange.chatAd=function(){function e(){var e=$(".question .post-taglist .post-tag");return e.length?e.map(function(e,t){return $(t).text()}).get().join(" "):null}function t(e){return 10>e?"0"+e:e}function n(e){var n=new Date;return n.setTime(1e3*e),[n.getUTCFullYear(),"-",t(n.getUTCMonth()+1),"-",t(n.getUTCDate())," ",t(n.getUTCHours()),":",t(n.getUTCMinutes()),":",t(n.getUTCSeconds()),"Z"].join("")}function r(e){var n=Math.floor((new Date).getTime()/1e3),r=n-e,i=r%60,a=Math.floor(r/60),o=Math.floor(r/3600);if(1>r)return"just now";if(60>r)return function(e){return 1==e.seconds?e.seconds+" sec ago":e.seconds+" secs ago"}({"seconds":i});if(3600>r)return function(e){return 1==e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({"minutes":a});if(86400>r)return function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":o});var s=Math.floor(r/86400);if(1==s)return"yesterday";if(2>=s)return function(e){return 1==e.__count?e.__count+" day ago":e.__count+" days ago"}({"__count":s});var u=new Date(1e3*e);return function(e){return e.month+" "+e.date+" at "+e.hours+":"+e.minutes}({"month":v[u.getMonth()],"date":u.getDate(),"hours":u.getHours(),"minutes":t(u.getMinutes())})}function i(e){var t=$("<div />");return t.text(e),t.html().replace('"',"&quot;")}function a(){h&&$.get(h,null,function(e,t,n){d(e,t,n)})}function o(e){if("!"==e.charAt(0)){var t=e.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(t)){var n=/\?/.test(t)?"&":"?";t+=n+"g&s=32"}return t}return"https://www.gravatar.com/avatar/"+e+"?s=23&d=identicon&r=PG"}function s(e){for(var t=$('<div class="ad502-users" />'),n=0;n<e.length&&7>n;n++){var i=e[n],a=i.name;i.lastPost&&(a+=": "+r(i.lastPost));var s=p+"/users/"+i.id,u=$('<a href="'+s+'" />');$("<img height='23' width='23' />").attr("title",a).attr("src",o(i.emailhash)).appendTo(u),t.append(u)}return t}function u(e){return $('<div class="ad502-users"><img src="'+p+"/rooms/users/"+e+'.jpeg" /></div>')}function c(e){var t=e.user,n=e.userid;return n?'<a href="'+p+"/users/"+n+'">'+i(t)+"</a>":i(t)}function l(){h&&(m>=f&&window.setTimeout(a,1e3*f),f+=g)}function d(e){var t=$("#ad502-rooms");if(e.error)return l(),void 0;t.html("");for(var a=e.rooms,o=0;o<a.length&&2>o;o++){var d=a[o],h=p+"/rooms/"+d.id,f=$('<div class="ad502-room"></div>');f.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+i(d.name)+'"><a href="'+h+'">'+i(d.name)+"</a></span></h3>")),d.messages&&d.messages.length>0&&f.append($('<span title="'+n(d.lastPost)+'" class="ad502-last-message">'+r(d.lastPost)+" - "+c(d.messages[0])+"</span><br>")),d.singleImage?f.append(u(d.id)):f.append(s(d.users)),t.append(f)}e.activeUsers>1?$("#h-chat-link").text(function(e){return 1==e.num,e.num+" People Chatting"}({"num":e.activeUsers})):$("#h-chat-link").text("Visit Chat"),$("#h-chat-link").attr("title",function(e){return 1==e.users&&1==e.rooms?e.users+" user active in "+e.rooms+" room the last 60 minutes":1==e.users?e.users+" user active in "+e.rooms+" rooms the last 60 minutes":1==e.rooms?e.users+" users active in "+e.rooms+" room the last 60 minutes":e.users+" users active in "+e.rooms+" rooms the last 60 minutes"}({"users":e.activeUsers,"rooms":e.activeRooms})),l()}var p,h,f=180,g=30,m=480,v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return/^\/questions\/\d+/i.test(window.location.pathname)&&(m=0),{"init":function(t){if(p=t.chatUrl,h=t.reloadUrl,t.tagBased){var n=e();if(!n)return;h&&(h+=(/\?/.test(h)?"&":"?")+"tags="+encodeURIComponent(n))}null===t.preloadData?a():d(t.preloadData,null,null)}}}(),StackExchange.helpers.noDiacritics=function(){var e={"àåáâäãåąɐᵄᶛ":"a","æǣǽᴂᵆ":"ae","çćčĉ":"c","đƍðÐ":"d","èéêëęǝᴈᵌ":"e","ⅎ":"f","ğĝᵷ":"g","ĥɥʮᶣ":"h","ìíîïıᴉᵎ":"i","ĵ":"j","ʞ":"k","ł":"l","ɯɰᵚᶭᴟ":"m","ñń":"n","òóôõöøő":"o","œɶᴔ":"oe","řɹɺɻʴʵ":"r","śşšŝ":"s","ß":"ss","ʇ":"t","Þ":"th","ùúûüŭů":"u","ʌᶺ":"v","ʍ":"w","ýŸÿʎ":"y","żźž":"z"};return function(t){for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(new RegExp("["+n+"]","g"),e[n]));return t}}(),StackExchange.question=function(){function e(){var e="hashchange.highlightDestination";$(window).off(e).on(e,function(){var e=window.location.href;if(!(e.indexOf("#")<0)){var t=decodeURI(e).match(/#(\d+|comment(\d+)_(\d+))/i);t&&(t[2]?p(t[2],t[3]):d(t[1]))}}).trigger(e)}var t,n,r,i=function(e,t){return e?function(e){return"share link to this question on "+e.socialNetwork}({"socialNetwork":t}):function(e){return"share link to this answer on "+e.socialNetwork}({"socialNetwork":t})},a=function(e,t,n,r,a,o){return $("<a>",{"id":"share-"+r+"-"+e,"class":"share-"+r,"title":i(t,n),"text":a,"data-svc":o})},o=function(e){var t=null!=e;e||(e=$("div.question div.post-menu a.short-link"));var n=e.closest(".post-menu, .help-menu");if(e.hasClass("share-link"))n.find(".close-share-tip").click();else{e.addClass("share-link");var r=e.attr("id").substring("link-post-".length),i=e.closest(".col-section").length?"section":e.closest("div.question").length?"question":"answer",o=e.closest("div.question").length,s="http://"+document.location.host+e.attr("href"),u=("answer"==i?"Answer:":"")+$("#question-header a").text(),c='<div class="share-tip" style="display:none">'+(o?"share a link to this question (includes your user id)":"share a link to this answer (includes your user id)")+'<input type="text" style="display:block; width:292px;" value="'+s+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(c+=$("<div>",{"id":"share-icons"}).append(a(r,o,"Google+","gp","share [g+]",1)).append(a(r,o,"Facebook","fb","share [fb]",2)).append(a(r,o,"Twitter","tw","share [tw]",3)).prop("outerHTML")),StackExchange.gps.track("share.show",{"location":o?1:2}),c+='<a class="close-share-tip" style="float:right">close</a></div>';var l=$(c);if(StackExchange.options.site.enableSocialMediaInSharePopup){var d="2";StackExchange.share.gplus($("#share-gp-"+r,l),s,u,d),StackExchange.share.facebook($("#share-fb-"+r,l),s,u,d),StackExchange.share.twitter($("#share-tw-"+r,l),s,u,d),$("#share-icons a",l).click(function(){l.fadeOutAndRemove(),StackExchange.gps.track("share.click",{"location":o?1:2,"service":$(this).data("svc")})})}l.appendTo(n).fadeIn(t?"fast":0).bind("removing",function(){e.removeClass("share-link")}).find(".close-share-tip").click(function(){l.fadeOutAndRemove()}).end().find("input[type=text]").select()}},s=function(e){var t=$("#post-form h2:first"),n=t.wrap("<div />").parent(),r=n.wrap("<div />").parent(),i=$("<div />").prependTo(r),a=r.height(),o=$("<div />"),s=$(e),u=parseInt(t.css("margin-bottom")),c=$("#content"),l=$("#wmd-input").outerWidth(),d=1e3,p=c.offset().left>t.offset().left-5&&"visible"!=c.css("overflow-x");o.css({"height":0,"overflowY":"hidden"}).appendTo(n).append(s),r.css({"height":a,"position":"relative"}),n.css({"position":"absolute","bottom":-u,"width":l}),i.addClass("answer-help-background").css({"position":"absolute","bottom":-u,"height":0,"width":l}),p&&(i.css("left",0),n.animate({"paddingLeft":5},d)),o.animate({"height":s.height()+u+10},d),i.animate({"height":s.height()+u+10+a},d),$("<div style='float:right;margin-top:20px;'><a href='#'>ok</a></div>").hide().prependTo(n).fadeIn(1e3).find("a").one("click",function(e){var r=$(this).parent();setTimeout(function(){r.remove()},1),o.animate({"height":0},d,function(){o.add(i).remove(),t.unwrap().unwrap(),t.text("Your Answer")}),i.animate({"height":0},d),p&&n.animate({"paddingLeft":0},d),e.preventDefault()})},u=function(){$.get("/posts/answer-help").then(s)},c=function(){$.get("/posts/answer-ban-warning").then(s).then(function(){var e=$("#post-form h2:first");e.text("WAIT!"),$("#qualityBanWarningShown").val("true")})},l=function(e){var t=e?e.closest(".question"):$(".question"),n=t.data("questionid");if(!n)throw new Error("getQuestionId could not find an id");return n},d=function(e){h($(".answer[data-answerid="+e+"]"))},p=function(e,t){var n="#comment-"+e,r=$(n);if(r.length)h(r);else{var i=$("#comments-link-"+t);i.length&&StackExchange.comments.loadAll(i).done(function(){h($(n))})}},h=function(e){var n=r;e.css({"backgroundColor":t}).animate({"backgroundColor":n},2e3,"linear",function(){$(this).css("background-color","")}),e.is(".comment")&&e[0].scrollIntoView(!0)},f=function(e){e=e||{},$(document).on("click",".post-menu a.short-link",function(t){return t.ctrlKey||t.metaKey?void 0:(o($(this),e.showCitation),!1)}).on("click",".bottom-share-links a",function(){var e=$(this).attr("href"),t=null;e&&e.length&&(e.indexOf("%3fsgp%3d")>=0?t=1:e.indexOf("%3fsfb%3d")>=0?t=2:e.indexOf("%3fstw%3d")>=0?t=3:e.indexOf("%3fsem%3d")>=0&&(t=4)),t&&StackExchange.gps.track("share.click",{"location":3,"service":t},!0)});var t=$(".bottom-notice");t&&t.length&&!t.data("bn")&&t.data("loc")&&(t.data("bn","bn"),t.on("click","a",function(){var e=0,n=t.data("loc"),r=$(this).attr("href");$(this).hasClass("post-tag")?e=1:/\/ask$/.test(r)?e=2:/\/tags$/.test(r)?e=4:/\/unanswered$/.test(r)?e=5:(/\/questions$/.test(r)||/\/questions[?\/]/.test(r))&&(e=3),StackExchange.gps.track("next_action.click",{"type":e,"location":n},!0)}))},g=function(e,t,n,r){var i,a,o=document.title,s=0;e.attr("autocomplete","off"),r=r||function(){};var u=function(u){var c=e.val();if(!(""==c||c==i&&u!==!0||StackExchange.settings.site.newTitleSearchBoxEnabled&&$(".title-float-selected:visible").length>0)){for(var l=c.split(" "),d=0,p=0;p<l.length;p++)$.trim(l[p]).length>0&&d++;var h=(new Date).getTime(),f=(h-s)/1e3;(u===!0||!(3>d||5>f)||e.hasClass("edit-field-overlayed"))&&(s=h,i=c,n&&(document.title=c?c+" - "+n:o),t.empty(),StackExchange.helpers.addSpinner(t),a&&a.fadeOutAndRemove(),$.ajax({"url":"/search/titles","dataType":"json","data":{"title":c},"success":function(e){e&&e.content&&(t.html(e.content),setTimeout(function(){r(t.find(".answer-link a").attr("target","_blank"))},1))},"complete":function(){StackExchange.helpers.removeSpinner(t)}}))}},c=!1;return t.mouseenter(function(){c=!0}).mouseleave(function(){c=!1}),e.keyup(u).blur(function(){var e=function(){s=0,u()};c?t.one("mouseleave",e):e()}),function(e){s=0,u(e)}},m=function(){try{localStorage.removeItem("nextPrevTrackState"),localStorage.removeItem("nextPrevTrackState2"),localStorage.removeItem("nextPrevState")}catch(e){}};return{"initTitleSearch":g,"showShareTip":o,"getQuestionId":l,"initShareLinks":f,"canViewVoteCounts":function(){return n},"init":function(i){n=i.canViewVoteCounts,StackExchange.question.fullInit?StackExchange.question.fullInit(i):StackExchange.question.bindAnonymousVoteDisclaimers(),StackExchange.comments.init({"autoShowCommentHelp":i.autoShowCommentHelp,"highlightColor":i.highlightColor,"commentHighlightColor":i.commentHighlightColor,"commentHighlightFocus":i.commentHighlightFocus,"backgroundColor":i.backgroundColor}),f(i),i.showAnswerBanWarning&&$("#wmd-input").one("focus",c),i.showAnswerHelp&&!i.showAnswerBanWarning&&$("#wmd-input").one("focus",u),i.focusPostEditor&&($("#wmd-input").focus(),$("#post-form")[0].scrollIntoView(!0)),i.showCitation&&$(document).on("click","div .cite-link",function(){var e=$(this).closest(".post-menu");e.find(".close-share-tip").click(),citation.show($(this))}),r=i.backgroundColor,t=i.highlightColor,e(),m()}}}(),StackExchange.question.bindAnonymousVoteDisclaimers=function(){function e(e){var t=$(this),n=t.closest("div.vote"),r=t.prop("className"),i=/vote-up/.test(r),a=/vote-down/.test(r),o=/star/.test(r),s=t.closest(".answer").length;if(e.preventDefault(),i||a){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Voting isn't available in read-only mode.",{"transient":!0}),void 0;var u=n.find("input").val();if(StackExchange.options.isMobile){StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+u+"?voteTypeId="+(i?2:3));var c="Thank you for your feedback.<br />"+(s?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this answer."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this question."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}));StackExchange.helpers.showMessage(t,c,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}else{var l="anon-vote-popup-"+u;if(n.is(":working")||$("."+l).length)return;n.data("working",!0),$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var d=$('<div class="anon-vote-popup vote-popup popup">'+function(e){return"Sending feedback"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(l).addSpinner();d.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("vote_popup.show",{"type":s?2:1})}),$.ajax({"type":"POST","url":"/posts/popup/anon-vote/"+u+"?voteTypeId="+(i?2:3),"dataType":"html","success":function(e){d.html(e)},"error":function(){d.remove()},"complete":function(){n.data("working",!1)}})}}else if(o){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Favoriting isn't available in read-only mode.",{"transient":!0}),void 0;$(".anon-vote-popup").fadeOutAndRemove();var c=s?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this answer."}({"startAnchor":'<a href="/users/login?ssrc=fav_answer&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this question."}({"startAnchor":'<a href="/users/login?ssrc=fav_question&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"});StackExchange.using("gps",function(){StackExchange.gps.track("favorite_popup.show",{})}),StackExchange.helpers.showMessage(t,c,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var t=$(this);t.data("bound-anonymous")||(t.data("bound-anonymous",!0),t.click(e))}),StackExchange.question.bindFetchAcceptedAnswerDates()},StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var e=$(this);if(!e.is(":working")){e.working(!0);var t=e.closest(".answer").data("answerid");if(!t)return e.attr("title",""),void 0;var n="/posts/"+t+"/accepted-answer-date";$.get(n,function(t){e.attr("title",t)})}})},StackExchange.comments=function(){function e(e,t){this.postId=e,this.jDiv=t,this.jtBody=t.find(" > table > tbody"),this.jCommentsLink=$("#comments-link-"+e)}function t(e){var t=$("#comments-"+e);if(t.length){var r=n(t),i=r.jCommentsLink,a=r.jtBody,o=a.data("remaining-comments-count")||0;o++,i.data("comments-count",o),i.attr("title","expand to show all comments on this post, or add one of your own"),r.setCommentsMenu(o),i.removeClass("disabled-link"),a.data("remaining-comments-count",o),i.show().fadeTo("fast",.7).fadeTo("fast",1)}}function n(t){var n=t.constructor===$?t:$(t),r=n.closest(".question, .answer, div[id^='post-']").find(".comments"),i=r.attr("id").replace(/^comments-/,"");if(h[i])return h[i];var a=new e(i,r);return h[i]=a,a}function r(e){return 0===window.location.pathname.indexOf("/review")?0:e.closest(".question").length?1:e.closest(".answer").length?2:0}function i(e){var t=$(this),i=t.closest(".question, .answer, div[id^='post-']"),o=i.find(".comments"),s=o.find(" > table > tbody"),u=0==s.data("remaining-comments-count"),c=t.hasClass("disabled-link"),l=t.parent(),d=l.data("rep");u&&l.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(l,function(e){return 1==e.rep,"Commenting requires an account with "+e.rep+" reputation"}({"rep":d}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"}}):a(l.attr("id").replace("comments-link-",""),r(t))),u&&l.data("reg")&&StackExchange.helpers.showMessage(l,function(e){return 1==e.rep,"You must have "+e.linkStart+e.rep+" reputation"+e.linkEnd+" to comment"}({"rep":d,"linkStart":"<a href='/help/privileges/comment'>","linkEnd":"</a>"}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"}}),t.hasClass("js-show-link")&&StackExchange.using("gps",function(){StackExchange.gps.track("comment.show")
});var p=!1;if(t.hasClass("js-add-link")){p=!0;var h="other";i.hasClass("question")?h="question":i.hasClass("answer")&&(h="answer");var f=u?"all_shown":"hidden";StackExchange.using("gps",function(){StackExchange.gps.track("comment.add",{"location":h,"type":f})})}c||(e.preventDefault(),n(this).addShow(!1,p))}function a(e,t){var n="anon-vote-popup-"+e;if(!$("."+n).length){$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var r=$('<div class="anon-vote-popup comment-popup popup">'+function(e){return"Loading"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(n).addSpinner();r.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show",{"type":t})}),$.ajax({"type":"POST","url":"/posts/popup/anon-comment/"+e,"dataType":"html","success":function(e){r.html(e)},"error":function(){r.remove()}})}}function o(e){var t=e&&e.post||document;h={},$(t).off("click","a.js-add-link",i).on("click","a.js-add-link",i),$(t).off("click","a.js-show-link",i).on("click","a.js-show-link",i),t==document&&u(),s(null,!0),e&&e.highlightColor&&e.highlightColor.length&&(c=e.highlightColor),e&&e.commentHighlightColor&&e.commentHighlightColor.length&&(l=e.commentHighlightColor),e&&e.backgroundColor&&e.backgroundColor.length&&(d=e.backgroundColor),e&&e.commentHighlightFocus&&(p=e.commentHighlightFocus)}function s(t,n){n||(g=t),t=t||g||{};for(var r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r])}function u(){if(0!=$(".question[data-questionid]").length){var e=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var t=$(this),n=t.closest(".answer"),r=n&&n.length?n.data("answerid"):0,i=t.closest(".comment").attr("id").substr("comment-".length),a=r?r:e,o="#comment"+i+"_"+a;location.href.indexOf("/questions/")>0?t.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({"hash":o})):t.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({"hash":o,"pid":a}))})}}var c,l,d,p,h={},f=function(){};e.prototype={"checkDiscussion":f,"ensureInput":f,"saveEditingComments":f,"restoreEditingComments":f,"isInputShown":function(){var e=this.jDiv.find('form[id^="add-comment-"]');return e.children().length&&e.is(":visible")},"commentsShown":function(){this.jtBody.data("remaining-comments-count",0)},"addShow":function(e,t){var n=this,r=this.loadAllComments().done(function(){n.checkDiscussion()});if(t){var i=this.ensureInput();i&&!e&&i.focus()}r.done(function(){i&&i.length>0&&n.jCommentsLink.hide()})},"ajax":function(e,t,n,r){n&&!r&&StackExchange.helpers.addSpinner(n,{"margin-left":"10px"});var i=this;return $.ajax(e).fail(function(e){var a=e.responseText;(!a||a.indexOf("<html")>=0)&&(a=t||"An error occured"),StackExchange.helpers.showErrorMessage(n||i.jDiv,a,{"transient":409==e.status}),n&&!r&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},"setCommentsMenu":function(e){var t="",n="";e>0&&(n=function(e){return 1==e.count?"show <b>"+e.count+"</b> more comment":"show <b>"+e.count+"</b> more comments"}({"count":e})),this.isInputShown()||!this.jtBody.data("cansee")&&!this.jtBody.data("canpost")||(t="add a comment"),t.length||n||!this.jtBody.data("comments-unavailable")||(t="comments disabled on deleted / locked posts / reviews"),StackExchange.options.inReadOnly&&(t="");var r=this.jCommentsLink.find(".js-add-link"),i=this.jCommentsLink.find(".js-show-link");r.html(t),i.html(n),t.length?r.removeClass("dno"):r.addClass("dno"),n.length?i.removeClass("dno"):i.addClass("dno"),t.length&&n.length?this.jCommentsLink.find(".js-link-separator").removeClass("dno"):this.jCommentsLink.find(".js-link-separator").addClass("dno"),this.jtBody.data("addlink-disabled")&&r.addClass("disabled-link")},"clearHighlights":function(){this.jtBody.find("div.comments tr.comment").removeClass("new_comment").css("background-color","")},"showComments":function(e,t,n,r){this.saveEditingComments(t);var i=!n&&(l||c&&d),a={};if(this.clearHighlights(),i&&this.jtBody.find("tr").each(function(e,t){t.id&&t.id.length&&(a[t.id]=!0)}),this.jtBody.html(e),i){var o=null;this.jtBody.find("tr").each(function(e,t){t.id&&t.id.length&&!a[t.id]&&(o||(o=t),$(t).addClass("new_comment"))});var s=this.jtBody.find("tr.new_comment");l?s.css({"backgroundColor":l}).removeClass("new_comment"):s.css({"backgroundColor":c}).animate({"backgroundColor":d},2e3,"linear",function(){$(this).css("background-color","").removeClass("new_comment")}),p&&s.length&&!r&&s[0].scrollIntoView(!0)}this.restoreEditingComments(),this.setCommentsMenu(0),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),u(),this.commentsShown()},"loadAllComments":function(e,t,n,r){this.jDiv.removeClass("dno");var i=0==this.jtBody.data("remaining-comments-count");if(!e&&i)return $.Deferred().resolve().promise();var a=this;return this.ajax({"type":"GET","url":"/posts/"+this.postId+"/comments"+(t||""),"dataType":"html"},"An error occurred while fetching comments").done(function(e){a.showComments(e,null,n,r)}).promise()}};var g;return{"init":o,"loadAll":function(e,t){return n(e).loadAllComments(!0,t,!0,!0)},"realtimeMessage":t,"extendPostUi":s,"uiForPost":n}}(),StackExchange.share=function(){function e(e,t,n){window.open(e,t,n)||(window.location.href=e)}function t(e,t,n){n="undefined"!=typeof n?n:"1",t+="="+n;var r=e.indexOf("?"),i=e.indexOf("#");return-1==r?-1==i?e+"?"+t:e.substring(0,i)+"?"+t+e.substring(i):-1==i?e+"&"+t:e.substring(0,i)+"&"+t+e.substring(i)}return{"gplus":function(n,r,i,a){r=t(r,"sgp",a),n.click(function(){e("https://plus.google.com/share?url="+encodeURIComponent(r),"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},"twitter":function(n,r,i,a){r=t(r,"stw",a);var o=117;i.length>o&&(i=i.substring(0,o-3)+"..."),n.click(function(){e("http://twitter.com/share?url="+encodeURIComponent(r)+"&ref=twitbtn&text="+encodeURIComponent(i),"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},"facebook":function(n,r,i,a){r=t(r,"sfb",a),n.click(function(){e("http://www.facebook.com/sharer.php?u="+encodeURIComponent(r)+"&ref=fbshare&t="+encodeURIComponent(i),"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}(),$.fn.extend({"postId":function(){var e=this.first();return e.hasClass("answer")&&e.hasClass("question")||(e=e.closest(".answer, .question")),parseInt(e.find(".vote input")[0].value)}}),StackExchange.newsletterAd=function(){function e(e){var t=$('<div class="popup newsletter-popup lightbox-panel" style="display:block"></div>').append($("<div />",{"class":"popup-close"}).append("<a>&times;</a>",{"title":"close this popup (or hit Esc)"})).append(e);$("body").loadPopup({"lightbox":!0,"html":t,"target":$("body")})}function t(){var t=StackExchange.options.site.name,n=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">',function(e){return"Subscribe to the "+e.site+" weekly newsletter"}({"site":t}),"</h2>",'<p><strong><a href="/users/login?ssrc=news&returnurl=/newsletter/signup/redirect">',function(e){return"Create an account on "+e.site+e.endAnchor+" or "+e.loginAnchor+"log in"+e.endAnchor+" if you already have one."}({"site":t,"loginAnchor":'<a href="/users/login?ssrc=news&returnurl=/newsletter/signup/redirect">',"endAnchor":"</a>"}),"</strong></p>",'<form><label for="newsletter-email-input">',"Or, send newsletter emails to:","</label> ",$("<input>",{"type":"email","id":"newsletter-email-input","maxlength":"100","title":"your email address","placeholder":"email address"}).outerHTML()," ",$("<input>",{"type":"submit","id":"newsletter-email-submit","value":"Subscribe"}).outerHTML(),"</form>",$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));n.find("form").submit(function(){var e=$(this),t=e.find("#newsletter-email-input"),n=e.find("#newsletter-email-submit"),r=$.trim(t.val());return 0==r.length?!1:(StackExchange.helpers.addSpinner(e),$.ajax({"url":"/newsletter/signup/anon","type":"POST","dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"email":r},"success":function(r){"confirmed"!=r.status||r.error?"unconfirmed"!=r.status||r.error?e.showErrorMessage(r.error||function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"})):(t.attr("disabled",!0),n.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),e.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):(t.attr("disabled",!0),n.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'))},"error":function(){e.showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner(e)}}),!1)}),e(n)}function n(){$("#newsletter-signup").click(function(){var e=$(this);return StackExchange.options.user.isAnonymous?(t(),!1):(StackExchange.helpers.addSpinner("#newsletter-signup-container"),$.ajax({"url":"/newsletter/signup","type":"POST","dataType":"json","data":{"fkey":StackExchange.options.user.fkey},"success":function(t){t.url?window.location.href=t.url:"confirmed"==t.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==t.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"error":function(){e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}}),void 0)}),$("#newsletter-preview").click(function(){var t=$(window).height(),n=Math.min(600,t-100),r=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',n,'px;">','<iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',n,'" frameborder="0"></iframe>',"</div>"].join("");return e(r),!1})}return{"init":n,"loader":function(e,t){var e=t||e,n=$(".newuser-greeting");$.ajax({"url":"/newsletter/targetted/ajax","data":{"domain":e},"success":function(e){$("#newsletter-ad").remove(),n.empty().append($(e))},"complete":function(){n.attr("class","").attr("style","")}}),t||(window.sessionStorage.tNewsletter=e+"-continued")}}}(),function(e,t,n,r){var i=!("selectionStart"in e("<input type='text' />")[0]);e.fn.caret=function(e,a){var o,s,u=this[0];if("object"==typeof e&&"number"==typeof e.start&&"number"==typeof e.end)o=e.start,s=e.end;else if("number"==typeof e&&"number"==typeof a)o=e,s=a;else if("string"==typeof e)(o=u.value.indexOf(e))>-1?s=o+e[t]:o=null;else if("[object RegExp]"===Object.prototype.toString.call(e)){var c=e.exec(u.value);null!=c&&(o=c.index,s=o+c[0][t])}if("undefined"!=typeof o){if(i){var l=this[0].createTextRange();l.collapse(!0),l.moveStart("character",o),l.moveEnd("character",s-o),l.select()}else this[0].selectionStart=o,this[0].selectionEnd=s;return this[0].focus(),this}if(i){var d=document.selection;if("textarea"!=this[0].tagName.toLowerCase()){var p=this.val(),h=d[n]()[r]();h.moveEnd("character",p[t]);var f=""==h.text?p[t]:p.lastIndexOf(h.text);h=d[n]()[r](),h.moveStart("character",-p[t]);var g=h.text[t]}else{var h=d[n](),m=h[r]();m.moveToElementText(this[0]),m.setEndPoint("EndToEnd",h);var f=m.text[t]-h.text[t],g=f+h.text[t]}}else var f=u.selectionStart,g=u.selectionEnd;var v=u.value.substring(f,g);return{"start":f,"end":g,"text":v,"replace":function(e){return u.value.substring(0,f)+e+u.value.substring(g,u.value[t])}}}}(jQuery,"length","createRange","duplicate"),StackExchange.nocaptcha=function(){function e(e,n){var r=['<div class="popup captcha-popup lightbox-panel" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",e,"</div>"].join("");$("body").loadPopup({"target":$("body"),"html":r,"lightbox":!0,"loaded":function(e){t(e,n)}})}function t(e,t){var n=e.find("form:first");StackExchange.helpers.enableSubmitButton(n),n.submit(function(){return StackExchange.helpers.disableSubmitButton(n),n.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/nocaptcha","type":"POST","dataType":"json","data":n.serialize(),"success":function(r){r.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),n.find(".form-error").html(r.captchaError),Recaptcha.reload()):(e.find(".popup-close a").click(),t(r))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),StackExchange.helpers.showErrorMessage(n,"An error occurred submitting the CAPTCHA")}}),!1})}return{"init":e}}(),StackExchange.captcha=function(){function e(e,n){var r=['<div class="popup captcha-popup lightbox-panel" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",e,"</div>"].join("");$("body").loadPopup({"html":r,"target":$("body"),"lightbox":!0,"loaded":function(e){t(e,n)}})}function t(e,t){var n=e.find("form:first");$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{"theme":"clean","lang":StackExchange.options.site.recaptchaAudioLang,"custom_translations":{"visual_challenge":"Get a visual challenge","audio_challenge":"Get an audio challenge","refresh_btn":"Get a new challenge","instructions_visual":"Type the text:","instructions_audio":"Type what you hear:","help_btn":"Help","play_again":"Play sound again","cant_hear_this":"Download sound as MP3","incorrect_try_again":"Incorrect. Try again.","image_alt_text":"reCAPTCHA challenge image","privacy_and_terms":"Privacy & Terms"},"callback":Recaptcha.focus_response_field}),StackExchange.helpers.enableSubmitButton(n),n.submit(function(){return StackExchange.helpers.disableSubmitButton(n),n.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/captcha","type":"POST","dataType":"json","data":n.serialize(),"success":function(r){r.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),n.find(".form-error").html(r.captchaError),Recaptcha.reload()):(e.find(".popup-close a").click(),t(r))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),StackExchange.helpers.showErrorMessage(n,"An error occurred submitting the CAPTCHA")}}),!1})})}return{"init":e}}(),StackExchange.gps=function(){function e(e){return m?!0:(m=!0,e&&t()?(StackExchange.gps.sendPending=o,StackExchange.gps.track=s,c(),o(),n(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1"),n(".question-page",".js-gps-related-questions .spacer","related_questions.click"),n(".question-page .post-taglist",".post-tag","question_tags.click",", location:1"),n(".question-page #sidebar .tagged",".post-tag","question_tags.click",", location:2"),r(),!0):(StackExchange.gps.track=function(e,t,n,r){r&&r()},delete StackExchange._gps_track,!1))}function t(){if(!window.localStorage)return!1;try{if(window.localStorage["gps-probe"]="1","1"!=window.localStorage["gps-probe"])return!1;window.localStorage.removeItem("gps-probe")}catch(e){return!1}return!0}function n(e,t,n,r){$(e).find(t).each(function(e){$(this).addClass("js-gps-track").data("gps-track",n+"({ position:"+(e+1)+r+" })")})}function r(e){var t=$(e||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var e=$.trim($(this).data("gps-track"));if(e)for(var t=i(e),n=0;n<t.length;n++){var r=t[n];StackExchange.gps.track(r[0],r[1],!0)}});f("bindTrackClicks bound {0} elements in {1}",t.length,e||"document")}function i(e){function t(e){if("true"===e)return!0;if("false"===e)return!1;if("'"===e[0]||'"'===e[0])return e.substring(1,e.length-1);var t=parseFloat(e);return isNaN(t)?e:t}for(var n=[],r=e.match(/([a-z._]+)(\([^)]+\))?/gi),i=0;i<r.length;i++){var a=r[i];if(a.indexOf("{")<0)n.push([a,{}]);else{for(var o=a.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),s=o[1],u=$.trim(o[2]),c=u.match(/[^,]+/gi),l={},d=0;d<c.length;d++){var p=c[d],h=p.indexOf(":"),f=$.trim(p.substr(0,h)),g=$.trim(p.substr(h+1)),m=t(g);l[f]=m}n.push([s,l])}}return n}function a(e,t,n){$(e).on("click",t+" a[href]:not(.question-hyperlink, .answer-hyperlink)",function(){var e=$(this),t=e.attr("href");StackExchange.helpers.isInNetwork(t)||("undefined"==typeof ga?f("outbound link clicked "+t):(ga("send","event","outbound","click",t,{"useBeacon":!0}),n&&ga("pageData.send","event","outbound","click",t,{"useBeacon":!0})))})}function o(e){var t=l();if(t.length>0){for(var n=(new Date).getTime(),r=[],i=0;i<t.length&&r.length<20;i++){var a=t[i],o=n-a.now;0>o||o>36e5?p(a):r.push(a)}r.length>0?h(r,e):e&&e()}}function s(e,t,n,r){var i={"evt":e,"properties":t||{},"now":(new Date).getTime()};d(i),navigator&&navigator.sendBeacon&&(n=!1),n?(r&&r(),window.setTimeout(o,1e4)):o(r)}function u(e){e&&StackExchange.options&&StackExchange.options.user&&(e.properties&&!e.properties.user_type&&(e.properties.user_type=StackExchange.options.user.user_type),!e.ab&&StackExchange.options.user.ab&&(e.ab=StackExchange.options.user.ab))}function c(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(e,t){d(t)}),delete StackExchange._gps_track)}function l(){var e=localStorage[g];return e?JSON.parse(e):[]}function d(e){u(e);var t,n=localStorage[g];if(n){var r=JSON.parse(n);r.push(e),t=JSON.stringify(r)}else t=JSON.stringify([e]);f("addToPending "+JSON.stringify(e)),localStorage[g]=t}function p(e){var t=localStorage[g];if(t){for(var n=JSON.parse(t),r=JSON.stringify(e),i=-1,a=0;a<n.length;a++){var o=JSON.stringify(n[a]);if(r==o){i=a;break}}if(-1!=i)return n.splice(i,1),0==n.length?(localStorage.removeItem(g),void 0):(localStorage[g]=JSON.stringify(n),void 0)}}function h(e,t){$.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);v[r]&&(e.splice(n,1),n--)}for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);v[r]=!0}var i=JSON.stringify(e);if(navigator&&navigator.sendBeacon)try{if(f("sending (beacon): "+i),navigator&&navigator.sendBeacon("/gps/event",i)){for(var n=0;n<e.length;n++){p(e[n]);var r=JSON.stringify(e[n]);delete v[r]}return t&&t(),void 0}}catch(a){f(a)}f("sending (AJAX): "+i),$.ajax({"type":"POST","url":"/gps/event","data":{"data":i},"success":function(){for(var t=0;t<e.length;t++)p(e[t])},"complete":function(){for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);delete v[r]}t&&t()}})}function f(e){if((StackExchange.options&&StackExchange.options.enableLogging2||$.cookie("devlog"))&&"string"==typeof e){if(arguments.length>1){var t=Array.prototype.slice.call(arguments,1);e=String.prototype.formatUnicorn.apply(e,t)}console.log("gps: "+e)}}var g="gps-pending",m=!1,v={},b=StackExchange.gps.track,w=StackExchange.gps.sendPending;return{"init":e,"bindTrackClicks":r,"track":b,"sendPending":w,"trackOutboundClicks":a}}(),StackExchange.openid=function(){function e(e,t){return e?(t&&$(e).data("ssrc",t),$(e).data("ssrc")):d}function t(t,n){var r=e(n);t&&StackExchange.gps.track("openid.click",{"openid_provider":t,"location":r},!0),StackExchange.gps.track("signup.start",{"openid_provider":t,"location":r},!0)}function n(n,r,i){var o=decodeURIComponent(r),d="unknown";i&&i.length?d=i:(0===o.indexOf("/questions/")&&(d="question_page"),"/questions/ask"===o&&(d="question_ask"));var p=$(n);e(p,d);var h=p.find(".new-login-left"),f=p.find(".new-login-right"),g=h.find(".show-more-options");g.click(function(){return g.hide(),f.show(),!1});var m=f.find(".hide-more-options");m.click(function(){return g.show(),f.hide(),!1}),p.removeClass("dno"),a(p,f);var v=h.find(".google-login");v.click(function(){t("Google",p),u(p)});var b=h.find(".facebook-login");b.click(function(){t("Facebook",p),s(p)});var w=h.find(".stackexchange-login");w.click(c(function(){t("Stack Exchange",p),StackExchange.navPrevention.stop(),window.location="/users/signup?ssrc="+encodeURIComponent(d)+"&returnUrl="+encodeURIComponent(o)})),p.find(".submit-openid").click(function(){l(p,o)})}function r(n,r,i,a,o){var c=decodeURIComponent(r);e(n,i);var d=n.find(".google-login");d.click(function(){t("Google",n),u(n)});var p=n.find(".facebook-login");p.click(function(){t("Facebook",n),s(n)});var h=n.find(".stackexchange-login");h.click(function(){t("Stack Exchange",n),window.location="/users/signup?ssrc="+encodeURIComponent(i)+"&returnUrl="+encodeURIComponent(c)}),n.find(".submit-openid").click(function(){l(n,c,a,o)})}function i(e,n){var r=$(e),i=r.find(".google-login");i.click(function(){t("Google",r),u(r)});var a=r.find(".facebook-login");a.click(function(){t("Facebook",r),s(r)});var o=r.find(".stackexchange-login");o.click(function(){t("Stack Exchange",r),window.location="/users/signup?ssrc=about&returnUrl="+encodeURIComponent(n)}),r.find(".submit-openid").click(function(){l(r,n)})}function a(e,t){var n=t.find(".option-extra-fields");n.hide();var r=t.find(".yahoo-button");r.click(function(){n.hide(),o(e,"yahoo")});var i=function(r){var i="."+r+"-option";n.show(),n.find("> div:not("+i+")").hide(),n.find(i+", .extra-field-container").show(),t.find(".extra-field").val("").focus();var a=t.find(".extra-field-submit");a.unbind("click"),a.click(function(){o(e,r,t.find(".extra-field").val())})},a=t.find(".blogger-button");a.click(function(){i("blogger")});var s=t.find(".aol-button");s.click(function(){i("aol")})}function o(t,n,r){var i=p[n];r&&(i=i.replace("{username}",r)),t.find(".ssrc").val(e(t)),t.find(".use-facebook").val(""),t.find(".use-google").val(""),t.find(".manual-openid").val(i),t.find(".submit-openid").click()}function s(t){t.find(".ssrc").val(e(t)),t.find(".use-facebook").val("true"),t.find(".use-google").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function u(t){t.find(".ssrc").val(e(t)),t.find(".use-google").val("true"),t.find(".use-facebook").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function c(e){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(e)})}}function l(t,n,r,i){var a=t.find(".manual-openid").val(),o=t.find(".use-facebook").val(),s=t.find(".use-google").val();c(function(){var u=!!StackExchange.options.site.isChildMeta,c=(u?StackExchange.options.site.parentUrl:"")+"/users/authenticate?returnurl="+encodeURIComponent(n),l=$('<form method="post" action="'+c+'"></form>');if(a){var d=$('<input type="hidden" name="openid_identifier" />');l.append(d),d.val(a)}else{var p=$('<input type="hidden" name="oauth_version" />'),h=$('<input type="hidden" name="oauth_server" />');l.append(p),l.append(h),p.val("2.0"),o?h.val("https://www.facebook.com/v2.0/dialog/oauth"):s&&h.val("https://accounts.google.com/o/oauth2/auth")}l.append("<input type='hidden' name='fkey' value='"+StackExchange.options.user.fkey+"' />"),$('<input type="hidden" name="ssrc" />').val(e(t)).appendTo(l),r&&i&&($('<input type="hidden" name="anon_vote_type" />').val(r).appendTo(l),$('<input type="hidden" name="anon_vote_hash" />').val(i).appendTo(l)),StackExchange.navPrevention.stop(),l.hide().appendTo("body").submit()})()}var d="unknown",p={"yahoo":"http://yahoo.com/","google":"https://www.google.com/accounts/o8/id","aol":"http://openid.aol.com/{username}","blogger":"http://{username}.blogspot.com/"};return{"initPostLogin":n,"initAnonPopup":r,"initTourSignup":i}}();var UniversalAuth=function(){return{"performAuth":function(){if(UniversalAuth.enabled()){var e=$.cookie("uauth");null!=e&&($.post("/users/login/universal/request",function(e){$.each(e,function(e,t){var n="//"+t.Host+"/users/login/universal.gif?authToken="+encodeURIComponent(t.Token)+"&nonce="+encodeURIComponent(t.Nonce);$(document).ready(function(){$("#footer").append('<img style="display:none" src="'+n+'"></img>')})})},"json"),$.cookie("uauth",null,{"path":"/","domain":document.domain}))}},"enabled":function(){return!0}}}();StackExchange.newnav={"init":function(e,t,n,r){StackExchange.newnav.shows=e,StackExchange.newnav.sorts=t,StackExchange.newnav.sortsByShow=n,StackExchange.newnav.config=r},"viewModels":{},"controllers":{},"helpers":{}},StackExchange.newnav.helpers.loader=function(e){function t(e){var t=$.Deferred(),n=$.get(e);return StackExchange.newnav.helpers.loader.pending.push(n),n.always(function(){var e=StackExchange.newnav.helpers.loader.pending.indexOf(n);e>=0&&StackExchange.newnav.helpers.loader.pending.splice(e,1)}).done(t.resolve.bind(null)).fail(t.reject.bind(null)),t.promise()}function n(){for(var e;StackExchange.newnav.helpers.loader.pending.length;)e=StackExchange.newnav.helpers.loader.pending.pop(),e.aborted=!0,e.abort();StackExchange.newnav.helpers.loader.pendingPeripherals&&StackExchange.newnav.helpers.loader.pendingPeripherals.cancel()}function r(e,t){return e.indexOf("?")>0?e+"&"+t:e+"?"+t}function i(e,i){n(),i?(a.onLoading(!0,!1),t(r(e,"fastpage=true")).always(function(){a.onLoadCompleted(!0,!1)}).done(function(e){e.warningTags?(a.onLoadFailed(e.warningTags),StackExchange.newnav.helpers.loader.pendingPeripherals&&StackExchange.newnav.helpers.loader.pendingPeripherals.cancel()):a.onLoadSucceeded(!0,!1,e)}),StackExchange.newnav.helpers.loader.pendingPeripherals=StackExchange.helpers.DelayedReaction(function(){a.onLoading(!1,!0),t(r(e,"peripherals=true")).always(function(){a.onLoadCompleted(!1,!0)}).done(function(e){e.warningTags?a.onLoadFailed(e.warningTags):a.onLoadSucceeded(!1,!0,e)})},2e3).trigger()):(a.onLoading(!0,!0),StackExchange.tagPreferences.resetDontApplyCache(),t(e).always(function(){a.onLoadCompleted(!0,!0)}).done(function(e){e.warningTags?a.onLoadFailed(e.warningTags):a.onLoadSucceeded(!0,!0,e)}))}var a={"onLoadSucceeded":function(){},"onLoadFailed":function(){},"onLoadCompleted":function(){},"onLoading":function(){}};return a=$.extend(a,e),{"load":i}},StackExchange.newnav.helpers.loader.pending=[],StackExchange.newnav.helpers.loader.pendingPeripherals=null,StackExchange.newnav.viewModels.questionList=function(e,t,n,r,i,a,o,s,u){function c(){at={}}function l(){return Object.keys(at).length}function d(){return Object.keys(at).length>0}function p(){return $.extend({},at)}function h(){return!it||""===it}function f(){return 0===(0|e)}function g(e,t,n){if(f())return"/";var r=StackExchange.newnav.config.routes.routesById[10*e+t];return r?n?"/questions/tagged/{tags}"+r.tagsRoute:"/questions"+r.noTagsRoute:n?"/questions/tagged/{tags}":"/questions"}function m(e,t){var n,r,i,a={"tags":tt,"showId":Q,"sortId":Y,"compose":K,"orCompose":et,"isExpanded":J,"fastpage":!1,"peripherals":!1,"hash":null,"page":ot?ot.page:1,"pagesize":ot.pagesize};return $.extend(a,e),4===a.showId&&(a.showId=0),n=a.tags.length>0,r=g(a.showId,a.sortId,n),n&&(r=r.formatUnicorn({"tags":encodeURIComponent(a.tags)})),i=function(e,t){r=StackExchange.helpers.updateQueryStringParameter(r,e,t)},a.tags.length>1&&a.compose&&i("mode",a.orCompose?"any":"all"),t||(i("page",a.page),i("pagesize",a.pagesize),(a.isExpanded===!0||a.isExpanded===!1)&&i("layout",a.isExpanded?"expanded":"compact"),a.fastpage&&i("fastpage","true"),a.peripherals&&i("peripherals","true")),r}function v(e){return m(e,!1)}function b(e){return m(e,!0)}function w(e){if(!st&&X&&W){if(G||c(),G&&G.body)return ut.onLoadSucceeded(!0,!0,G.body,V),void 0;var t=v();e=!!e,E(t),W.load(t,e)}}function k(e){G=e,e&&(tt=e.tags,et=e.orCompose,Q=e.showId,Y=e.sortId,J=e.expanded,at=e.realtimePosts,ot=e.paging,w())}function x(t){return{"id":e,"tags":tt,"orCompose":et,"showId":Q,"sortId":Y,"expanded":J,"paging":ot,"realtimePosts":at,"body":t}}function y(e,t){window.history.replaceState&&!G&&window.history.replaceState(x(e),document.title,b(t))}function E(e,t){window.history.pushState&&!G&&window.history.pushState(x(e),document.title,b(t))}function C(){Z&&(G||c(),StackExchange.realtime.newnav_multiplex.unsubscribe(Z),Z=null)}function A(){if(!StackExchange.newnav.config.showRecommended||!f()&&!Z){var e,t,n,r,i=V.getTagsArray();!K&&i.length>1||(e=StackExchange.newnav.sorts[Y].realtimeName,t=StackExchange.newnav.shows[Q].realtimeName,n="newest"===e,r="active"===e,G||c(),StackExchange.options.realtime&&(StackExchange.options.realtime.newest&&n||StackExchange.options.realtime.active&&r||StackExchange.options.realtime.tagged&&(n||r)&&i.length>0)&&(Z=Math.random(),StackExchange.realtime.newnav_multiplex.subscribe({"token":Z,"layout":J?"expanded":"compact","sort":e,"filter":t,"requiredTags":i,"mode":s?"or":"and"},function(e){if(e.token!=Z)throw"got data with invalid token: "+e.token+"!="+Z;e.questions.forEach(function(e){var t=/question-summary-(\d+)/i.exec(e.closest(".question-summary").attr("id"));t&&t[1]&&(at[t[1]]={"id":t[1],"index":(new Date).getTime(),"body":e.outerHTML()})}),ut.onRealtimeUpdates()})))}}function S(){var e=StackExchange.newnav.config.routes.routesById[10*Q+Y];return tt&&""!==tt.trim()?tt&&tt.trim().indexOf(" ")<0?e.autonameOneTag.formatUnicorn(tt):e.autonameManyTags:e.autonameNoTags}function _(){return f()?"home":h()?S():it}function q(e){st||($.extend(ut,e),W=StackExchange.newnav.helpers.loader({"onLoadSucceeded":function(e,t,n){ut.onLoadSucceeded(e,t,n,V),t&&V.replaceState(n)},"onLoadFailed":function(){ut.onLoadFailed.apply(null,arguments)},"onLoadCompleted":function(){ut.onLoadCompleted.apply(null,arguments)},"onLoading":function(){ut.onLoading.apply(null,arguments)}}))}function L(){return f()?!1:nt}function T(){if(f())return null;var e={"name":it,"uri":b()};return nt=!1,e}function D(){return JSON.stringify({"dirty":V.isDirty(),"id":V.id,"name":V.getName(),"isExpanded":J,"isSelected":X,"showId":Q,"sortId":Y,"tags":tt,"compose":K,"orCompose":et,"realtimeToken":Z},null,"  ")}function B(e){J!==e&&(C(),J=e,w(),A())}function I(e){e!==X&&(X=e,e&&w())}function N(t){0!==e&&it!==t&&(nt=!0,it=t)}function P(e){f()||Y===e||(C(),nt=!0,Y=e,ot.page=1,w(),A())}function O(e,t){f()||Q===e||(C(),nt=!0,4===e&&(e=0),Q=e,Y=t,ot.page=1,w(),A())}function F(e){var t=e.join(" ");return f()||tt===t?!1:(C(),nt=!0,tt=t,K=0===e.filter(function(e){var t=e.toLowerCase();return"and"===t||"or"===t||"not"===t}).length&&e.length>1,ot.page=1,w(!0),A(),!0)}function R(e){!f()&&et!==e&&K&&(C(),nt=!0,et=e,ot.page=1,w(),A())}function M(){if(f())return StackExchange.options.site.name;var e=l();return e>0?function(e){return 1==e.realtimeCount,"("+e.realtimeCount+") "+e.pageTitle+" - "+e.siteName}({"realtimeCount":e,"pageTitle":V.getName(),"siteName":StackExchange.options.site.name}):function(e){return e.pageTitle+" - "+e.siteName}({"pageTitle":V.getName(),"siteName":StackExchange.options.site.name})}function j(e,t){e=e||ot.page||ct.page,t=t||ot.pagesize||ct.pagesize;var n=e!==ot.page,r=t!==ot.pagesize;n&&(C(),ot.page=e),r&&(ot.pagesize=t),(n||r)&&w(),n&&1===e&&A()}function U(){return $.extend({},ct,ot)}function H(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function z(){var e,t,n,r=p();c(),t=[];for(e in r)r.hasOwnProperty(e)&&t.push(r[e]);n=t.sort(H),ut.onRefreshContent(n,V),y($("body").html())}var V,G,Z,W,X=!1,J=n,Q=0|r,Y=0|i,K=o,et=s,tt=a||"",nt=null==u?!0:u,rt=!1,it=t,at={},ot={"page":1,"pagesize":15},st=!1,ut={"onLoadSucceeded":function(){return null},"onLoadCompleted":function(){return null
},"onLoadFailed":function(){return null},"onLoading":function(){return null},"onRealtimeUpdates":function(){return null}},ct={"page":1,"pagesize":15};return V={"id":e,"isHome":f,"isDirty":L,"init":q,"save":T,"getVisible":function(){return X},"setVisible":I,"getIsExpanded":function(){return J},"setIsExpanded":B,"generateLoadUri":v,"generateSaveUri":b,"toString":D,"getName":_,"setName":N,"getShowId":function(){return Q},"setShowId":O,"getSortId":function(){return Y},"setSortId":P,"getTags":function(){return tt},"setTags":F,"getTagsArray":function(){return(tt||"").split(/\s+/).filter(function(e){return""!==e})},"getTagComposition":function(){return et},"setTagComposition":R,"getTagComposable":function(){return K},"getAutoFocus":function(){return rt},"setAutoFocus":function(e){rt=e},"getTitle":M,"getRealtimeCounts":l,"hasRealtimeUpdates":d,"setPopState":k,"replaceState":y,"pushState":E,"setPaging":j,"getPaging":U,"refreshContent":z,"unsubscribe":C,"setMute":function(e){st=e}},A(),V},StackExchange.newnav.viewModels.questionList.parseCanonicalUri=function(e){function t(e){var t,n,r={},i=e.split("?");return i[1]?(t=i[1].split("&"),t.forEach(function(e){n=e.split("="),r[n[0]]=decodeURIComponent(n[1])}),r):r}var n,r,i,a,o,s,u=!1,c=t(e),l=/^\/questions\/tagged\/([^\/?]+)/i;if((s=l.exec(e))&&s[1]){switch(i=decodeURIComponent(s[1]),c.sort){case"active":n=0;break;default:case"newest":n=1;break;case"hot":n=2;break;case"votes":n=3;break;case"linked":n=4;break;case"ending":n=5;break;case"size":n=6}switch(c.filter){default:case"all":r=0;break;case"today":r=1;break;case"week":r=2;break;case"month":r=3;break;case"need-answers":r=7;break;case"no-answer":r=5;break;case"bounties":r=6}}else{var d=e.split("?")[0].substring("/questions".length),p=StackExchange.newnav.config.routes.routesByName[d];r=p.showId,n=p.sortId}return a=c.mode,u=!!a,u&&(o="any"==a.toLowerCase()),{"sortId":n,"showId":r,"tags":i,"orCompose":o,"compose":u}},StackExchange.newnav.viewModels.questionList.load=function(e,t,n){try{var r=t.name,i=StackExchange.newnav.viewModels.questionList.parseCanonicalUri(t.uri),a=StackExchange.newnav.viewModels.questionList(e,r,n,i.showId,i.sortId,i.tags,i.compose,i.orCompose,!1);return a}catch(o){return null}},StackExchange.newnav.viewModels.navigation=function(){function e(){R||O.onNavigationChanged(I)}function t(e){$.extend(O,e),N.forEach(function(e){e.init(O)})}function n(t){B&&B.id===t.id||(B=t,N.forEach(function(e){e.setVisible(e.id==t.id)}),e())}function r(t){var r=N.reduce(function(e,t){return Math.max(e,t.id)},-1)+1;if(0===r)t={"showId":0,"sortId":1,"tags":""};else{t=$.extend({},{"showId":0,"sortId":1,"tags":""},t);var i=StackExchange.newnav.sortsByShow[t.showId];i||(t.showId=0,i=StackExchange.newnav.sortsByShow[0]),-1==i.indexOf(t.sortId)&&(t.sortId=i[0])}var a=StackExchange.newnav.viewModels.questionList(r,null,P,t.showId,t.sortId,t.tags);a.setMute(R),a.init(O),N.push(a),n(a),a.setAutoFocus(!0),e()}function i(t){var r=a(t);if(null!=r){var i,o=N.reduce(function(e,t){return Math.max(e,t.id)},-1)+1;i=0==o?{"showId":0,"sortId":1,"tags":""}:{"showId":r.getShowId(),"sortId":r.getSortId(),"tags":r.getTags()};var s=StackExchange.newnav.sortsByShow[i.showId];s||(i.showId=0,s=StackExchange.newnav.sortsByShow[0]),-1==s.indexOf(i.sortId)&&(i.sortId=s[0]);var u=StackExchange.newnav.viewModels.questionList(o,null,P,i.showId,i.sortId,i.tags);u.init(O),N.push(u),n(u),u.setAutoFocus(!0),e()}}function a(e){return e=0|e,0>e?null:N.filter(function(t){return t.id==e})[0]}function o(e){if(B.id!=e){var t=a(e);if(t){var r=N.indexOf(t),i=N.indexOf(B);t.setPaging(1),r!==i&&(t.setAutoFocus(!1),n(t))}}}function s(e){R=!0;var t;try{t=e.tabOptions}catch(i){}if(null==t&&(t={"isExpanded":!1,"questionLists":[]}),N=[],r(),t.tabs.forEach(function(e,t){var n=StackExchange.newnav.viewModels.questionList.load(t+1,e,P);n&&(n.setMute(!0),N.push(n))}),e.extraList){var a=e.extraList,o=N.reduce(function(e,t){return Math.max(e,t.id)},-1)+1,s=StackExchange.newnav.viewModels.questionList(o,a.name,P,a.show,a.sort,a.tags,a.compose,a.orCompose,!0),u=s.generateSaveUri(),c=N.filter(function(e){return e.generateSaveUri()==u});c.length>0?n(c[0]):(s.setMute(!0),s.init(O),N.push(s),n(s))}else n(N[0]);D(location.search),B.replaceState($("body").html()),$(window).on("popstate",T),N.forEach(function(e){e.setMute(!1)}),R=!1}function u(t){var n=StackExchange.newnav.config.tabOptions.tabs||[],r=[],i=t?t.generateSaveUri():null;N.forEach(function(e){if(!e.isHome()){var a=e.generateSaveUri();if(i&&i==a)r.push(t.save()),i=null;else{var o=!1;n.forEach(function(e,t){!o&&e&&e.uri==a&&(o=!0,r.push(e),n[t]=null)})}}});var a={"isExpanded":P,"tabs":r};$.post("/home/save-tabs",{"tabOptions":JSON.stringify(a),"fkey":StackExchange.options.user.fkey}).fail(function(){}),StackExchange.newnav.config.tabOptions=a,e()}function c(e){u(e?null:B)}function l(t){var r=a(t);if(r&&!(r.id<1)){var i=N.indexOf(r),o=N.indexOf(B);i==o&&(o==N.length-1?n(N[o-1]):n(N[o+1])),N.splice(i,1),r.unsubscribe(),c(!0),e()}}function d(t){var n=a(t);if(n&&!(n.id<1)){var r=N.indexOf(n);if(r!=N.length-1){var i=N[r];N[r]=N[r+1],N[r+1]=i,c(!0),e()}}}function p(t){var n=a(t);if(n&&!(n.id<1)){var r=N.indexOf(n);if(!(2>r)){var i=N[r];N[r]=N[r-1],N[r-1]=i,c(!0),e()}}}function h(t,n){var r=a(t);if(r&&r.getName()!=n){var i=r.isDirty();r.setName(n),i||u(r),e()}}function f(t){t!=P&&(P=t,N.forEach(function(e){e.setIsExpanded(t)}),c(!0),e())}function g(t){B&&!B.isHome()&&B.setTags(t)&&e()}function m(){return!B||B.isHome()?null:B.getTags()}function v(){return!B||B.isHome()?null:StackExchange.newnav.sortsByShow[B.getShowId()]}function b(){return!B||B.isHome()?null:B.getShowId()}function w(t){if(B&&!B.isHome()&&StackExchange.newnav.shows[t]){var n=B.getSortId(),r=StackExchange.newnav.sortsByShow[t];-1==r.indexOf(n)?B.setShowId(t,r[0]):B.setShowId(t,n),e()}}function k(){return!B||B.isHome()?null:B.getSortId()}function x(t){B&&!B.isHome()&&(B.setSortId(t),e())}function y(){return B&&!B.isHome()&&B.getTagComposable()?B.getTagComposition():null}function E(t){B&&!B.isHome()&&B.getTagComposable()&&(B.setTagComposition(t),e())}function C(){return!B||B.isHome()?null:B.getTagComposable()}function A(){return!B||B.isHome()?!1:B.isDirty()}function S(e,t){var n=!1,r=StackExchange.newnav.config.tabOptions.tabs||[];return r.forEach(function(r){n||r.uri!=e||t&&r.name||(n=!0)}),n}function _(e){return e?S(e):!0}function q(e){if(e&&S(e,!0)){var t=null;N.forEach(function(n){t||n.generateSaveUri()!=e||n.name||n.isDirty()||(t=n)}),t&&0!=t.id&&l(t.id)}}function L(e){if(e){var t=StackExchange.newnav.viewModels.questionList.load(0,{"uri":e});t&&(r({"showId":t.getShowId(),"sortId":t.getSortId(),"tags":t.getTags()}),c())}}function T(e){var t=e.originalEvent,r=t.state;if(r){var i=a(r.id);i&&(i.setPopState(r),f(r.expanded),n(i),i.setPopState(null))}}function D(e){for(var t,n=/(?:[&?])(page(?:size)?)=(\d+)/gi,r={};t=n.exec(e);)r[t[1].toLowerCase()]=+t[2];N.forEach(function(e){e.setPaging(e.getVisible()?r.page:1,r.pagesize)})}var B,I,N=[],P=StackExchange.newnav.config.isExpanded,O={"onNavigationChanged":function(){}},F=$.extend({},StackExchange.newnav.config.invalidTags),R=!1;return I={"init":t,"load":s,"addList":r,"removeList":l,"renameList":h,"selectList":o,"saveList":c,"moveListRight":d,"moveListLeft":p,"setIsExpanded":f,"getIsExpanded":function(){return P},"getShowId":b,"setShowId":w,"getSortId":k,"setSortId":x,"getSorts":v,"getTags":m,"setTags":g,"getTagComposition":y,"setTagComposition":E,"hasTagComposition":C,"tabs":function(){return N},"onHome":function(){return B.isHome()},"generateLoadUri":function(e){return B.generateLoadUri(e)},"isModified":A,"listExists":_,"addListByUri":L,"removeListByUri":q,"getAutoFocus":function(){return B.getAutoFocus()},"duplicateList":i,"getInvalidTags":function(){return F},"addInvalidTag":function(e){F[e]=!0},"getPaging":function(){return B.getPaging()},"setPagingByUri":D,"refreshContent":function(){B.refreshContent()}}},StackExchange.newnav.controllers.unifiedQuestionListController=function(e){function t(){$('.help-popup input[type="checkbox"]').each(function(t,n){var r=$(n),i=e.listExists(r.attr("name"));r.prop("checked",i)})}function n(e){if(null!=StackExchange.options.user.accountId&&e){var t=e.getTagsArray(),n=t.filter(RegExp.prototype.test.bind(/^(?:and|or|not)$/i)).length,r=n?null:t;StackExchange.tagPreferences.applyPrefs(!0,r)}}function r(e){var t=$(".tabs-list");t.find(".intellitab").remove();var n=t.find(":first-child");if($(".new-post-activity").remove(),e.tabs().forEach(function(e,t,r){var i=$($("#tmpl-tab-item").html());i.closest(".intellitab").attr("data-id",e.id);var a=e.getName(),o=a;e.isDirty()&&(a="*"+a);var s=e.getRealtimeCounts();s>0&&(a="({count}) {name}".formatUnicorn({"count":s,"name":a})),i.find("a:first").attr("href",e.generateSaveUri()),i.find(".tab-name").text(a),i.find(".tab-name").attr("title",o),i.find(".tab-full-name").val(o),e.getVisible()&&(i.addClass("selected").find("a:first").addClass("youarehere"),document.title=($("#mainbar").data("title-prefix")||"")+e.getTitle()),e.isHome()&&(i.find(".menu-switcher").remove(),i.find(".tab-full-name").remove()),1==t&&i.find(".move-left-tab").addClass("disabled"),t==r.length-1&&i.find(".move-right-tab").addClass("disabled"),i.insertBefore(n),e.getVisible()&&e.hasRealtimeUpdates()&&e.getPaging().page<2&&($("#question-mini-list, #questions").prepend(function(){var t=e.getRealtimeCounts(),n=1===e.getSortId()?function(e){return 1==e.count?e.count+" new question":e.count+" new questions"}({"count":t}):function(e){return 1==e.count?e.count+" question with new activity":e.count+" questions with new activity"}({"count":t});return $('<div class="new-post-activity">'+n+"</div>").data("questionList",e)}),e.replaceState($("body").html()))}),e.onHome())$(".tab-show").hide(),$(".tab-sort").hide(),$(".tab-tag-filter").hide(),$(".tab-save").hide(),$(".question-list-layout").hide(),$(".tab-tag-callout").show(),StackExchange.newnav.config.userHasPrefs&&$(".tab-parameters").hide();else{$(".tab-parameters").show(),$(".tab-show").show(),$(".tab-show li[data-tab-options]").each(function(){var t=$(this),n=t.data("tab-options");t[e.getShowId()===n.showId?"addClass":"removeClass"]("selected").find("a:first").attr("href",e.generateLoadUri(n))}),$(".tab-sort").show();var r=e.getSorts();if($(".tab-sort li[data-tab-options]").each(function(){var t=$(this),n=t.data("tab-options");t[-1===r.indexOf(n.sortId)?"addClass":"removeClass"]("disabled")[e.getSortId()===n.sortId?"addClass":"removeClass"]("selected").find("a:first").attr("href",e.generateLoadUri(n))}),$(".tab-tag-filter").show(),l=!0,c){var i=$(".tab-tag-filter .tag-filter")[0],a=e.getTags().trim(),o=a.split(" ").filter(function(e){return-1===i.value.trim().split(" ").indexOf(e)});o.length>0&&(i.func_clear(),i.func_add(a)),d(e)}else p(e);l=!1;var s=!1;$("#search input[name='q']").val(e.getTags().trim().split(" ").reduce(function(e,t){return t?"not"==t?(s=!s,e):(e.length>0&&(e+=" "),"and"==t||"or"==t?e+=t:(s&&(e+="-"),e+="["+t+"]"),s=!1,e):e},"")),e.hasTagComposition()?($(".tag-filter-isany").show().find("a[data-tab-options]").each(function(){var t=$(this);t.attr("href",e.generateLoadUri(t.data("tab-options")))}),e.getTagComposition()?($(".tag-filter-isany .any").addClass("selected"),$(".tag-filter-isany .all").removeClass("selected")):($(".tag-filter-isany .all").addClass("selected"),$(".tag-filter-isany .any").removeClass("selected"))):$(".tag-filter-isany").hide(),$(".tab-save").show(),e.isModified()?$(".tab-save").removeClass("disabled"):$(".tab-save").addClass("disabled"),$(".question-list-layout").show().find("a[data-tab-options]").each(function(){var t=$(this);t.attr("href",e.generateLoadUri(t.data("tab-options")))}),e.getIsExpanded()?($(".question-list-layout .expanded").addClass("selected"),$(".question-list-layout .collapsed").removeClass("selected")):($(".question-list-layout .expanded").removeClass("selected"),$(".question-list-layout .collapsed").addClass("selected")),$(".tab-tag-callout").hide();var u=e.getTags();(""==u||u.indexOf(" ")>-1)&&$("div.excerpt.question").hide()}$("a.disabled, .disabled a").attr("href",null)}function i(e,t){var r=$(t);$("#sidebar").html(r.filter("#sidebar").html()),$(".pager, .page-sizer, #permalink").remove(),r.find(".page-sizer").insertBefore("#loading-overlay"),r.find(".pager").insertBefore("#loading-overlay"),r.filter("#permalink").insertAfter("#sidebar");var i=$(".bounties-tab");r.find(".bounties-tab").insertAfter(i),i.remove(),StackExchange.helpers.bindShowMoreHotNetworkQuestions(),n(e)}function a(e,t){var r=$(t),i=r.find("#qlist-wrapper");$("#qlist-wrapper").html(i.html()),n(e),document.title=($("#mainbar").data("title-prefix")||"")+e.getTitle(),$(".question.excerpt").remove(),$("#qlist-wrapper").prepend($('<div class="question excerpt"/>')),$(".question.excerpt").html(r.find(".question.excerpt").html())}function o(e){var t=$("#sidebar").removeSpinner();e&&t.addSpinner()}function s(e){var t=$("#loading-overlay").addClass("dno").removeSpinner();e&&t.removeClass("dno").addSpinner()}var u=null,c=!1,l=!1,d=function(e){e.getAutoFocus()?$(".tab-tag-filter .tag-filter").focus():$(".tab-tag-filter .tag-filter").blur()},p=function(e){c||e.onHome()||(StackExchange.using("tagEditor",function(){$(".tab-tag-filter .tag-filter").val(e.getTags()),StackExchange.tagEditor($(".tab-tag-filter .tag-filter"),null,!1,{"excerpts":!1,"invalid":e.getInvalidTags(),"operators":/^(?:and|or|not)$/i,"tagMenus":!0}),StackExchange.helpers.genericBindOverlayEvents($(".tab-tag-filter .tag-editor"),$(".tab-tag-filter .tag-filter"),function(){return""===$(".tab-tag-filter .tag-filter").val()}),d(e)}),c=!0)},h={"showing":!1,"show":function(e){this.hide(),e&&e.filter(".dropdown").show(),$(".intellitab").not(":first").addClass("dropdown-enabled"),this.showing=!0},"hide":function(){this.showing=!1,$(".intellitab").removeClass("dropdown-enabled"),$(".newnav .tab-parameters .dropdown").hide()},"toggle":function(e){this.showing?this.hide():this.show(e)}},f=function(e){var t=$(e.target).closest(".intellitab");0!=t.data("id")&&(h.hide(),t.addClass("renaming"),t.find("a").hide(),t.find("input.tab-full-name").show().focus().select(),u=t,e.stopImmediatePropagation(),e.preventDefault())},g=function(t){if(u){if(t){var n=u.data("id");e.renameList(n,u.find("input.tab-full-name").val())}u.removeClass("renaming"),u.find("a").show(),u.find("input.tab-full-name").hide(),u=null}};$(document).on("click",".new-post-activity",function(){e.refreshContent(),$(".flash").hide().fadeIn().removeClass("flash")}),$(document).on("click",".disabled, .disabled *",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),$(document).on("click",".tabs-list .remove-tab",function(t){var n=$(t.target).closest(".intellitab").data("id");h.hide(),e.removeList(+n),t.stopImmediatePropagation(),t.preventDefault()}),$(document).on("click",".tabs-list .move-right-tab",function(t){var n=$(t.target);if(!n.hasClass("disabled")){var r=$(t.target).closest(".intellitab").data("id");h.hide(),e.moveListRight(+r)}t.stopImmediatePropagation(),t.preventDefault()}),$(document).on("click",".tabs-list .move-left-tab",function(t){var n=$(t.target);if(!n.hasClass("disabled")){var r=n.closest(".intellitab").data("id");h.hide(),e.moveListLeft(+r)}t.stopImmediatePropagation(),t.preventDefault()}),$(document).on("click",".tabs-list .rename-tab",f),$(document).on("dblclick",".tabs-list .intellitab",f),$(document).on("keyup","input.tab-full-name",function(e){if(u){if(13==e.which)g(!0);else{if(27!=e.which)return;g(!1)}e.stopImmediatePropagation()}}),$(document).on("blur","input.tab-full-name",function(){g(!0)}),$(document).on("click",".tabs-list .menu-switcher",function(e){h.toggle(),e.stopImmediatePropagation(),e.preventDefault()}),$(document).on("click",".tabs-list .intellitab",function(t){t.stopImmediatePropagation(),t.preventDefault();var n=$(t.target);if(!n.closest(".menu-switcher").length){var r=n.closest(".intellitab").data("id");e.selectList(+r)}}),$(document).on("click",".tabs-list-container .add-tab",function(t){e.addList({}),t.preventDefault()}),$(document).on("click",".tabs-list-container .duplicate-tab",function(t){var n=$(t.target).closest(".intellitab"),r=n.data("id");0!=r&&(e.duplicateList(r),t.preventDefault(),t.stopImmediatePropagation())}),$(document).on("click",".tag-filter-isany .any, .tag-filter-isany .all",function(t){var n=e.getTagComposition(),r=$(t.target).hasClass("any");e.setTagComposition(r),t.preventDefault(),n!=r&&$.post("/users/save-preference",{"key":121,"value":r?"or":"and","fkey":StackExchange.options.user.fkey})}),$(document).on("click",".question-list-layout a",function(t){var n=$(t.target).hasClass("expanded");e.setIsExpanded(n),t.preventDefault(),$.post("/users/save-preference",{"key":120,"value":n?"true":"false","fkey":StackExchange.options.user.fkey})}),$(document).on("click",".tab-show li[data-tab-options] a",function(t){var n=$(t.target).closest("li[data-tab-options]").data("tab-options").showId;h.hide(),e.setShowId(+n),t.preventDefault()}),$(document).on("click",".tab-sort li[data-tab-options] a",function(t){var n=$(t.target).closest("li[data-tab-options]").data("tab-options").sortId;h.hide(),e.setSortId(+n),t.preventDefault()}),$(document).on("click",".tab-save a",function(t){$(t.target).closest(".tab-save").hasClass("disabled")||e.saveList()}),$(document).on("click",".tab-show li[data-id] a",function(t){var n=$(t.target).closest("li[data-id]").data("id");e.setShowId(+n),t.preventDefault()}),$(document).on("tageditor:renderedchange",".tag-filter",function(t,n,r){""!=r&&n.push(r),l||(l=!0,e.setTags(n),l=!1)}),$(document).on("click",".newnav .filter-switcher",function(e){h.toggle($(e.target).parent().find("ul.dropdown")),e.stopImmediatePropagation(),e.preventDefault()}),$(document).on("mouseenter mouseleave",".newnav .filter-switcher",function(e){h.showing&&h.show($(e.target).closest(".tab-show, .tab-sort").find("ul.dropdown"))}),$(document).on("mouseenter mouseleave",".newnav .intellitab",function(){h.showing&&(h.hide(),h.show())}),$(document).on("click",function(e){h.showing&&!$(e.target).closest("ul.dropdown").length&&(h.hide(),e.stopImmediatePropagation())}),$(document).on("keypress",".tab-tag-filter .tag-editor",function(e){13==e.which&&$(".tab-tag-filter .tag-filter")[0].func_finish()}),$(document).on("change",'.help-popup input[type="checkbox"]',function(n){var r=$(n.target);r.prop("checked")?e.addListByUri(r.prop("name")):e.removeListByUri(r.prop("name")),t()}),$(document).on("click",".help-tab",function(e){$("#prototype").loadPopup({"html":$("#tmpl-help-popup").html(),"insert":function(e){e.insertAfter("#prototype.subheader")},"lightbox":!0,"dontShow":!0}).done(function(e,t){e.show(),t.fadeIn("fast")}),t(),e.preventDefault()}),$(document).on("click",".pager a, .page-sizer a",function(t){var n=$(t.target).closest("a"),r=n.attr("href");e.setPagingByUri(r),$("html, body").animate({"scrollTop":$(".tabs-list").position().top},200),t.stopImmediatePropagation(),t.preventDefault(),$.post("/users/save-preference",{"key":10,"value":e.getPaging().pagesize,"fkey":StackExchange.options.user.fkey})}),$(document).on("click","#hide-restore-tabs",function(){$.post("/newnav/toggle-restore-tabs/false",{"fkey":StackExchange.options.user.fkey}).done(function(){StackExchange.helpers.closePopups(),$(".help-tab").remove()})}),e.load(StackExchange.newnav.config),e.init({"onNavigationChanged":function(e){r(e)},"onLoadSucceeded":function(e,t,n,r){e&&a(r,n),t&&i(r,n)},"onLoadFailed":function(t){t.split(/\s+/).forEach(function(t){e.addInvalidTag(t)}),$(".tab-tag-filter .tag-filter")[0].func_redraw()},"onLoadCompleted":function(e,t){e&&s(!1),t&&o(!1)},"onLoading":function(e,t){e?(t&&StackExchange.tagPreferences.resetDontApplyCache(),s(!0)):t&&o(!0)},"onRefreshContent":function(t,i){$(".flash").removeClass("flash");for(var a=0;a<t.length;a++){var o=t[a];$("#question-summary-"+o.id).remove(),$(o.body).prependTo("#question-mini-list, #questions"),$("#question-summary-"+o.id).addClass("flash")}n(i),styleCode(),StackExchange.realtime.updateRelativeDates(),$(".new-post-activity").remove(),$(".no-posts").remove(),document.title=($("#mainbar").data("title-prefix")||"")+i.getTitle(),r(e)},"onRealtimeUpdates":function(){r(e)}}),p(e)},StackExchange.ready(function(){function e(){try{$.cookie("fkey",StackExchange.options.user.fkey,{"path":"/","expires":1/144})}catch(e){}}if(StackExchange.options.user.isAnonymous){var t=/\bfkey=/i;$(document).ajaxSend(function(n,r,i){"post"===i.type.toLowerCase()&&(t.test(i.url)||t.test(i.data))&&e()}),$(document).on("submit","form",function(){var t=$(this);"post"===t.attr("method").toLowerCase()&&t.find("input[name='fkey']").length&&e()})}}),StackExchange.askButton=function(){var e=$("#nav-askquestion").clone(),t=$("#sidebar"),n="btn _medium";($("body").hasClass("questions-page")||$("body").hasClass("tagged-questions-page")||$("body").hasClass("tags-page"))&&e.css({"position":"absolute","right":0,"top":0}),$("body").hasClass("question-page")&&(n="btn",t=$("#question-header"),t.css("padding-right",110),e.css({"position":"absolute","right":0,"top":5})),($("body").hasClass("ask-page")||$("body").hasClass("badges-page")||$("body").hasClass("faq-page")||$("body").hasClass("privileges-page"))&&(n="hidden-important"),t.css("position","relative"),e.addClass(n).css("margin-bottom","1em").prependTo(t),$("body").hasClass("home-page")&&e.wrap('<div class="text-right" />'),$("#search input[name=q]").on({"focus":function(){$(".topbar, #header").addClass("_search-active")},"blur":function(){$(".topbar, #header").removeClass("_search-active")}})},StackExchange.loggedIn={},StackExchange.tagPreferences=function(){function e(e){return e=e.replace(/#/g,"ñ").replace(/\+/g,"ç").replace(/\./g,"û"),/\*/.test(e)?"div.tags:regex(class, t-"+e.replace(/\*/g,".*")+")":"div.t-"+e}function t(e,t,n){var r="";"undefined"!=typeof forUserId&&(r=forUserId),$.post("/users/save-preference",{"fkey":StackExchange.options.user.fkey,"key":e,"value":t,"forUserId":r},n)}var n=[],r=$('<table><tr><td class="vt"><input type="text" id="interestingTag" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),i=$('<table><tr><td class="vt"><input type="text" id="ignoredTag" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),a=function(t,n){return t.map(function(e,t){return $(t).text()}).filter(function(e,t){if(!n)return!0;var r;/\*/.test(t)&&(r=new RegExp(t.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(var e=0;e<n.length;e++){var i=n[e];if(t===i)return!1;if(r&&r.test(i))return!1}return!0}).map(function(t,n){return e(n)}).get().join(",")},o=function(e,n,r,i,a,o){for(var u=$(e).val(),c=sanitizeAndSplitTags(u,!0),d=!1,p=i.split(" ").map(function(e){return e.trim()?"."+e.trim():""}).join(""),h=0;h<c.length;h++)if(0!=$.trim(c[h]).length){var f=$(n).find(p);if(f.each(function(){return $(this).text()==c[h]?($(this).fadeTo(500,.1).fadeTo(500,1),d=!0,void 0):void 0}),!d){var g=encodeURIComponent(c[h]),m=$("<a>").attr({"id":c[h],"href":"/questions/tagged/"+g,"class":i,"title":function(e){return"show questions tagged '"+e.tag+"'"}({"tag":c[h]})}).text(c[h]);$(n).append(m),$(n).append(" "),s(r)}d=!1}$(e).val(""),a&&$(e).focus(),o||t(r,$(n).text()),l()},s=function(e){var n=20==e?"#interestingTags > .post-tag:last":25==e?"#ignoredTags > .post-tag:last":40==e?"#interestingTags > .post-tag":45==e?"#ignoredTags > .post-tag, #remainingIgnored > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag",r=function(e){var n=$(e.target),r=n.closest(".post-tag"),i=r.closest("div"),a=i.is("#ignoredTags")?25:i.is("#interestingTags")?20:-1;return-1===a?console.log("removeTag: unknown container. Stopping execution. '"+i.text()+"'"):(r.remove(),t(a,i.text()),l()),!1};$("<span>").addClass("delete-tag").attr("title","remove this tag").appendTo($(n)).click(r)},u=function(){return $("#hideIgnoredTrue").is(":checked")?!0:$("#hideIgnoredFalse").is(":checked")?!1:$("#hideIgnored").is(":checked")},c=function(e){var t=$("#ignoredTags > a, #remainingIgnored > a");if(u()){var n=a(t,!0);if(n.length>0)return $(e).find(n).length>0}},l=function(e,t){if(t)for(var r=0;r<t.length;r++)-1==n.indexOf(t[r])&&n.push(t[r]);t=n;var i=$("#ignoredTags > a, #remainingIgnored > a"),o=$("#interestingTags > a");if(!e||0!=i.length||0!=o.length){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");var s=a(i,t),c=a(o,t);if(s.length>0){var l=u()?"tagged-ignored-hidden":"tagged-ignored";$(s).closest("div.question-summary").addClass(l)}c.length>0&&$(c).closest("div.question-summary").addClass("tagged-interesting")}},d=function(e,t){var n,r=$("#tag-menu");"favorite"==t&&(n=$("#ignoredTags a").filter(function(){return $(this).text()==e}),n.add(n.next()).remove(),$("#interestingTag").val(e),o("#interestingTag","#interestingTags",20,"post-tag",!1,!0)),"ignore"==t&&(n=$("#interestingTags a").filter(function(){return $(this).text()==e}),n.add(n.next()).remove(),$("#ignoredTag").val(e),o("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0)),"clear"==t&&(n=$("#ignoredTags a").filter(function(){return $(this).text()==e}),n.add(n.next()).remove(),n=$("#interestingTags a").filter(function(){return $(this).text()==e}),n.add(n.next()).remove(),l()),StackExchange.helpers.addSpinner(r),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(e)+"/favorite","data":{"action":t,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(t){h(r.html($(""+t)),e)},"error":function(){},"complete":StackExchange.helpers.removeSpinner})},p=function(e,t){var n=$("#tag-menu");StackExchange.helpers.addSpinner(n),$.ajax({"type":"POST","url":"/tags/"+encodeURIComponent(e)+"/subscription","data":{"unsubscribe":t,"fkey":StackExchange.options.user.fkey},"dataType":"html","success":function(t){h(n.html($(""+t)),e)},"error":function(){},"complete":StackExchange.helpers.removeSpinner})},h=function(e,t){e.find(".tm-se-subscription").click(function(){p(t,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?d(t,"ignore"):$(this).hasClass("tm-favorite-clear")?d(t,"favorite"):$(this).hasClass("tm-favorite-ignore")&&d(t,"clear")})},f=function(e){e&&s(40),$("#add-interesting").append(r);r.find("#interestingAdd").unbind("click").bind("click",function(){o("#interestingTag","#interestingTags",20,"post-tag user-tag",!0),$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")}),E()},g=function(e){$("#tag-pref-prefs").removeClass("dno"),e&&s(45),$("#add-ignored").append(i);i.find("#ignoredAdd").unbind("click").bind("click",function(){x(),o("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")}),E()},m=function(e){if($.contains(document.documentElement,e.target)&&!$(e.target).closest("#interesting-tags").length){var t=$("#interestingTags > .post-tag").length>0,n=$("#ignoredTags > .post-tag, #remainingIgnored > .post-tag").length>0;t?b():v(),n?k():w(),$("#interesting-tags .delete-tag").remove(),S(),$(document).off("click",m)}},v=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno")},b=function(){$("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")},w=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno")},k=function(){$("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")},x=function(){$("#showRemainingIgnored").addClass("dno"),$("#remainingIgnored").removeClass("dno")},y=function(){$(document).on("click","#addInterestingTag",function(){$(this).addClass("dno"),f(!1)}),$(document).on("click","#addIgnoredTag",function(){$(this).addClass("dno"),g(!1)}),$(document).on("click","#edit-interesting",function(){$(this).addClass("dno"),$("#addInterestingTag").addClass("dno"),$("#tag-subscriptions, #ignored-wrapper").removeClass("dno"),$("#edit-ignored").length||g(!0),f(!0)}),$(document).on("click","#edit-ignored",function(){$(this).addClass("dno"),g(!0)}),$(document).on("click","#showRemainingIgnored",function(){x()})},E=function(){$(document).off("click",m).on("click",m)},C=!1,A=function(){C=!0},S=function(){C&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{"applyPrefs":l,"isIgnored":c,"forceEditMode":A,"resetDontApplyCache":function(){n=[]},"init":function(){StackExchange.tagmenu.init(h),0!=$("#interestingTags").length&&(y(),E(),$("#hideIgnored, #hideIgnoredTrue, #hideIgnoredFalse").click(function(){t(30,u()),l()}),S())}}}(),StackExchange.question.fullInit=function(e){if(window.votesCast=e.votesCast,StackExchange.vote.init(e.questionId),StackExchange.question.bindSuggestedEditPopupLinks(),StackExchange.vote_bounty.init(e),/^#autocomment/.test(window.location.hash)){var t=$(".comments-link:first"),n="#comment-"+window.location.hash.substring(12),r=function(){var t=$(n),r=$("<span><b>Trivial answer converted to comment</b></span>");t.find(".comment-date").append($("<br>")).append(r),t.css({"backgroundColor":e.highlightColor}),t.animate({"backgroundColor":e.backgroundColor},2e3,"linear",function(){$(this).css("background-color","")}),$(n)[0].scrollIntoView(!0)};e.totalCommentCount&&e.shownCommentCount&&e.totalCommentCount!=e.shownCommentCount?StackExchange.comments.loadAll(t).done(r):r()}},StackExchange.question.bindSuggestedEditPopupLinks=function(){function e(e){var t=e.parent(),n=e.attr("id").substring("edit-pending-".length);e.data("working")||e.data("working",!0).loadPopup({"url":"/review/suggested-edit-popup/"+n,"lightbox":!0,"dontShow":!0,"target":t,"defaultErrorMessage":"Unable to load suggested edit - please try again"}).done(function(e,t){t.fadeIn("fast");{var n=$(window).height();e.find(".popup-suggested-edit").css({"max-height":n-100})}e.css("height","600px").center().css("height","").fadeIn("fast")}).always(function(){e.removeData("working")})}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){return e($(this)),!1})})},StackExchange.vote=function(){var e=StackExchange.helpers,t={"informModerator":-1,"undoMod":0,"acceptedByOwner":1,"upMod":2,"downMod":3,"offensive":4,"favorite":5,"close":6,"reopen":7,"bountyClose":9,"deletion":10,"undeletion":11,"spam":12},n="View upvote and downvote totals",r="This is one of your favorite questions (click to undo)",i="Click to mark as favorite question (click again to undo)";$("div.vote .star-off").attr("title",i);var a=function(e){var t=e?e.closest("div.vote"):$("div.vote"),n=$("body.read-only").length>0,r=t.hasClass("vote-election-primary");t.find(".vote-up-off, .vote-down-off").each(function(){var e,t,i,a,o=$(this);if(n)e="Voting is disabled while the site is in readonly mode";else{if(t=o.hasClass("vote-up-off"),i=(t?m:v)(o),a=o.closest(".answer").length>0,r)return;e=a?t?"This answer is useful":"This answer is not useful":t?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful",e+=StackExchange.loggedIn&&i?" (click again to undo)":""}o.attr("title",e)})},o=function(e){e||(e="div.vote"),$(e).find(".vote-up-off").unbind("click").click(function(){d($(this))}),$(e).find(".vote-down-off").unbind("click").click(function(){p($(this))})},s=function(e){var t=e?e.closest("div.vote"):$("div.vote");
return t.find(".vote-up-off, .vote-down-off").unbind("click")},u=function(e){$.each(e,function(){var e=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case t.upMod:e.find(".vote-up-off").addClass("vote-up-on");break;case t.downMod:e.find(".vote-down-off").addClass("vote-down-on");break;case t.favorite:var n=e.find(".star-off");n.addClass("star-on"),n.attr("title",r),e.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}}),votesCast=null},c=function(e){$.ajax({"type":"GET","url":"/posts/"+e+"/votes","dataType":"json","success":u})},l=function(e){null==window.votesCast?c(e):u(window.votesCast),o(),a()},d=function(e){var n=e.parent().find(".vote-up-off"),r=e.parent().find(".vote-down-off"),i=m(n),a=v(r),o=i?-1:a?2:1;y(e,o),x(n,r),i||n.addClass("vote-up-on"),E(e,i?t.undoMod:t.upMod)},p=function(e){var n=e.parent().find(".vote-up-off"),r=e.parent().find(".vote-down-off"),i=v(r),a=m(n),o=i?1:a?-2:-1;y(e,o),x(n,r),i||r.addClass("vote-down-on"),E(e,i?t.undoMod:t.downMod)},h=function(){return $("div.vote a[id^='vote-accepted-']")},f=function(){return $("div.post-menu a[id^='protect-post-']")},g=function(){return $("div.post-menu a[id^='unprotect-post-']")},m=function(e){return e.hasClass("vote-up-on")},v=function(e){return e.hasClass("vote-down-on")},b=function(e){return e.hasClass("star-on")},w=function(e){return e.closest("div.vote").find("input[name=_id_]").val()},k=function(e){return e.closest("div.vote").find("input[name=_ltu_]").val()},x=function(e,t){e.removeClass("vote-up-on"),t.removeClass("vote-down-on")},y=function(e,t){var n,r=e.siblings("span.vote-count-post");if(r.find(".vote-count-separator").length>0){var i=parseInt(r.children(":first").text(),10),a=Math.abs(parseInt(r.children(":last").text(),10));n=i-a,M(r)}else n=parseInt(r.text(),10);r.text(n+t)},E=function(e,t){s(e);var n=w(e);C({"$target":e,"postId":n,"voteTypeId":t,"success":A,"data":{"ltu":k(e)}})},C=function(e){var t=e.$target,n=e.postId,r=e.data,i=e.voteTypeId,a=function(r){r.Warning?confirm(r.Message)&&(u.ignoreWarnings="true",d()):e.success&&e.success(t,n,r),e.complete&&e.complete()},o=function(r){t.parent().showErrorMessage("An error has occurred - please retry your request."),e.error&&e.error(t,n,r),e.complete&&e.complete()},s=t.data("vote-sub");if(s)return setTimeout(function(){a(s)},0),void 0;var u={"fkey":StackExchange.options.user.fkey};if(r)for(var c in r)u[c]=r[c];var l="/posts/"+n+"/vote/"+i;e.undo&&(l+="?undo=true");var d=function(){$.ajax({"type":"POST","url":l,"data":u,"dataType":"json","success":a,"error":o})};d()},A=function(e,n,r){if(r.Success){if(r.Message&&e.parent().showInfoMessage(r.Message,{"transient":r.Transient}),r.ShowShareTip){var i=$(e).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(i)}r.LastVoteTypeId==t.upMod?$(document).trigger("upVote",n):r.LastVoteTypeId==t.downMod?$(document).trigger("downVote",n):$(document).trigger("undoVote",n)}else window.console&&window.console.firebug&&(!r.Message||r.Message.length<5)?e.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site."):(r.Message?r.Info?e.parent().showInfoMessage(r.Message,{"transient":!0}):e.parent().showErrorMessage(r.Message,{"transient":!0}):e.parent().showErrorMessage("An error has occurred - please retry your request."),x(e,e),e.parent().find("span.vote-count-post").text(r.NewScore),r.LastVoteTypeId&&S(e,r.LastVoteTypeId));o(e.parent()),a(e)},S=function(e,n){var r,i;n==t.upMod?(r=".vote-up-off",i="vote-up-on"):n==t.downMod&&(r=".vote-down-off",i="vote-down-on"),r&&e.closest("div.vote").find(r).addClass(i)},_=function(){$(document).on("click",".star-off:not(.disabled)",function(e){q($(this)),e.preventDefault()})},q=function(e){if(!e.data("loading")){e.data("loading",!0);var n=w(e)||e.siblings("input[type=hidden][name=_id_]").val(),a=e.parent().find("div.favoritecount b"),o=parseInt("0"+a.text().replace(/^\s+|\s+$/g,""),10),s=function(){return b(e)?(e.removeClass("star-on"),e.attr("title",i),a.removeClass("favoritecount-selected").text(--o<=0?"":o),!0):(e.addClass("star-on"),e.attr("title",r),a.addClass("favoritecount-selected").text(++o),!1)},u=s();C({"$target":e,"postId":n,"voteTypeId":t.favorite,"undo":u,"success":function(t,n,r){e.data("loading",!1),r.Success||(s(),e.parent().showErrorMessage(r.Message))}})}},L=function(e,t){var n="div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']",r=$(document);r.off("click",n),r.on("click",n,function(n){n.preventDefault(),D($(this),e,t)}),r.off("mouseenter mouseleave",n),r.on("mouseenter mouseleave",n,function(){var e=$(this);if(e.hasClass("load-tooltip-on-hover")){e.removeClass("load-tooltip-on-hover");var t=e.attr("id").substring("delete-post-".length),n="/posts/"+t+"/delete-tooltip";$.get(n,function(t){e.attr("title",t)})}})},T=function(e,n,r,i){e.loadPopup({"url":"/posts/{postId}/fancy-deletion-prompt".formatUnicorn({"postId":n}),"loaded":function(a){StackExchange.helpers.bindMovablePopups(),$(a).find("a").each(function(e,t){var n=$(t).attr("href");n&&n.length>1&&$(t).attr("target","__blank")}),$(a).find(".cancel-delete").click(function(e){return StackExchange.helpers.closePopups(a),e.preventDefault(),!1}),$(a).find(".delete-question").click(function(o){return StackExchange.helpers.closePopups(a),C({"$target":e,"postId":n,"voteTypeId":t.deletion,"success":r,"data":i}),o.preventDefault(),!1})}})},D=function(e,n,r){var i=e.attr("id").substring("delete-post-".length),a=e.text().indexOf("undelete")>-1,o=e.data(a?"undelete-prompt":"delete-prompt");o||(o=StackExchange.options.user.isModerator?a?"Undelete this post?":"Delete this post?":a?"Vote to undelete this post?":"Vote to delete this post?");var s=a?!1:!!e.data("fancy-delete"),u=n||B;return s?(T(e,i,u,r),void 0):(confirm(o)&&(StackExchange.realtime.pauseQuestionNotifications=!0,C({"$target":e,"postId":i,"voteTypeId":a?t.undeletion:t.deletion,"success":u,"data":r})),void 0)},B=function(t,n,r){var i=t.text().indexOf("undelete")>-1;if(r&&r.Success)if(t.html(r.Message),t.addClass("load-tooltip-on-hover"),r.NewScore<0){var a=$(".question:has(a[id='delete-post-"+n+"'])").length>0,o=a?".question, div.answer":"#answer-"+n;I($(o),!i)}else t.parent().showInfoMessage(i?"Your undelete vote has been recorded":"Your delete vote has been recorded");else{var s=r&&r.Message?r.Message:i?"A problem occurred during undeletion":"A problem occurred during deletion";e.showErrorMessage(t.parent(),s)}StackExchange.realtime.pauseQuestionNotifications=!1},I=function(e,t){t?($("div.question-status:has(span:contains('delete'))").show(),e.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("div[id^='comments-link-']>a").addClass("comments-link-deleted")):document.location.reload(!0)},N=function(){var e=$(this),n=e.attr("id").substring("vote-accepted-".length),r=h();e.is(":working")||(e.parent().addSpinner(),r.working(!0),C({"$target":e,"postId":n,"voteTypeId":t.acceptedByOwner,"success":function(n,i,a){a.Success?(r.removeClass("vote-accepted-on"),parseInt(a.Message,10)==t.acceptedByOwner&&e.addClass("vote-accepted-on")):e.parent().showErrorMessage(a.Message,{"transient":a.Transient}),e.parent().removeSpinner(),r.working(!1).trigger("update")}}))},P=function(){var e=$(this),t=e.hasClass("vote-accepted-on")?"unaccept":"accept";e.attr("title",e.data("title-"+t)).text(e.data("verb-"+t))},O=!1,F=function(e){return e.closest("div.vote").children('input[type="hidden"]').val()},R=function(e){if(!O){O=!0;var t=F(e);e.addSpinner(),$.ajax({"type":"GET","url":"/posts/{postId}/vote-counts".formatUnicorn({"postId":t}),"dataType":"json","success":function(t){StackExchange.helpers.removeMessages();var n='<div style="color:green">'+t.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+t.down+"</div>";e.html(n).unbind("click").data("bound",!1).css("cursor","default").attr("title",function(e){return 1==e.upCount&&1==e.downCount?e.upCount+" up / "+e.downCount+" down":1==e.upCount?e.upCount+" up / "+e.downCount+" down":(1==e.downCount,e.upCount+" up / "+e.downCount+" down")}({"upCount":Math.abs(+t.up),"downCount":Math.abs(+t.down)}))},"error":function(t){e.removeSpinner().parent().showErrorMessage(t.responseText&&t.responseText.length<100?t.responseText:"An error occurred during vote count fetch",{"transient":409==t.status})},"complete":function(){O=!1}})}},M=function(e){(e||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").filter(function(){return F($(this))}).attr("title",n).css("cursor","pointer").click(function(){R($(this))}).data("bound",!0)},j=function(e){l(e),f().unbind("click").click(function(e){e.preventDefault();var t=this.id.substring("protect-post-".length);return confirm("Are you sure you want to protect this question?")&&$.ajax({"type":"POST","url":"/question/protect","data":{"id":t,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)}}),!1}),g().unbind("click").click(function(e){e.preventDefault();var t=this.id.substring("unprotect-post-".length);return confirm("Are you sure you want to unprotect this question?")&&$.ajax({"type":"POST","url":"/question/unprotect","data":{"id":t,"fkey":StackExchange.options.user.fkey},"success":function(){location.reload(!0)}}),!1}),StackExchange.vote_closingAndFlagging.init(),_()};return{"init":function(e){var t=!StackExchange.options.user.isRegistered;t?StackExchange.question.bindAnonymousVoteDisclaimers():j(e),h().not(":data(bound)").on({"click":N,"update":P}).data("bound",!0).trigger("update"),StackExchange.question.bindFetchAcceptedAnswerDates(),StackExchange.question.canViewVoteCounts()&&M(),L()},"up":d,"down":p,"vote_init":l,"favorite_init":_,"delete_init":L,"bindFetchVoteCounts":M,"highlightExistingVotes":u,"submit":C,"voteTypeIds":t,"getPostId":w}}(),StackExchange.vote_closingAndFlagging=function(){function e(){q=L=T=D=null}function t(t,r){e(),q=t.data("questionid"),L=t,t.data("isclosed")?(r||confirm("Nominate this question for reopening?"))&&g():n(!0)}function n(e){StackExchange.helpers.closePopups($("#popup-close-question"));var t=L.closest(".post-menu");0==t.length&&(t=L.parent());var n={"loadedTimestamp":L.data(I)};S&&S.reviewTaskIdGetter&&(n.reviewTaskId=S.reviewTaskIdGetter());var i=L.loadPopup({"url":"/flags/questions/{questionId}/close/popup".formatUnicorn({"questionId":q}),"data":n,"dontShow":!0,"target":t,"errorTarget":S?S.errorTarget:null}).done(function(n){T=n,T.appendTo(t),r(),S&&S.closeShowPopup?S.closeShowPopup(T,L):e&&T.center().fadeIn("fast")});return i}function r(){T.on("popupClose",function(){D&&StackExchange.helpers.closePopups(D)}),T.find("input[type=radio]").closest("li").bind("show-action",function(){o($(this))}),$("#close-question-form").submit(function(e){return e.preventDefault(),f(),!1}),$(".retract-close-vote").click(function(){k($(this))}),$(".action-list a").attr("target","_blank"),i(),a()}function i(){var e=$(".close-as-duplicate-pane"),t=e.find("#search-text");e.on("show",function(){$("#search-text").focus(),$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling"),t.typeWatch({"highlight":!1,"wait":750,"captureLength":-1,"callback":function(){p(t)}})}function a(){var e=T.find(".off-topic-other-comment-container"),t=e.find("textarea"),n=e.closest("li").find("input[type=radio]"),r=$.trim(t.val()),i=function(){return $.trim(t.val())!=r},a=function(e){var n=e&&i();t.is(":focus")&&T.find(".popup-submit").enable(n)};t.charCounter({"target":e.find(".text-counter"),"min":30,"max":500,"setIsValid":a}),n.click(function(){e.show(),t.focus();var n=t.val();t.val("").val(n)}),t.focus(function(){n.is(":checked")||n.attr("checked","checked")})}function o(e){var t=e.find("input:radio"),n=T.find(".popup-subpane").filter(function(){var e=t.data("subpane-name");return e&&e==$(this).data("subpane-name")}),r=T.find(".popup-submit");n.length?(s(n,$(".popup-active-pane"),!0),n.hasClass("handles-submit-button-enabling")||r.disable()):r.enable()}function s(e,t,n){if(T.find(".popup-active-pane").removeClass("popup-active-pane").hide(),T.find(".popup-title").html(e.data("title")),n){var r=t.data("breadcrumb")||t.data("title");c(r,function(){s(t,e,!1)})}if(u(e),t.data("clear-input-selector")){t.find(t.data("clear-input-selector")).val("");var i=T.find(".popup-submit");i.attr("disabled","disabled")}e.addClass("popup-active-pane").show().trigger("show").asyncLoad()}function u(e){e.find("input[type=radio]:checked").removeAttr("checked"),e.find("li.action-selected").removeClass("action-selected"),T.find(".popup-submit").disable()}function c(e,t){var n=$(".popup-title-container .popup-breadcrumbs"),r=$("<span>").addClass("breadcrumb");$("<a>").text(e).click(function(){r.nextAll().andSelf().remove(),t()}).appendTo(r),$("<span>").addClass("arrow").html("&gt;").appendTo(r),r.appendTo(n)}function l(){c("Flagging",function(){var e=T.offset();StackExchange.options.isMobile||D.css({"top":e.top,"left":e.left}),T.hide(),D.fadeIn("fast"),s(T.find("#pane-main"),T.find(".popup-active-pane"),!1)})}function d(e){var t=e.find(".list-originals");return 0==t.children().length?(t.hide(),void 0):(t.show(),h(t,!0),styleCode(),t.find(".item").click(function(){var e=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),t=$("#search-text").val(e.attr("href"));return p(t,e),!1}).hover(function(){$(this).toggleClass("hover")}),void 0)}function p(e,t){var n=e.closest(".popup-subpane"),r=n.find(".preview"),i=n.find(".list-container"),a=n.find(".search-errors").empty(),o=$("#original-question-id"),s=n.closest("#popup-close-question").find(".popup-submit");if(s.disable(),r.html("").hide(),0!=$.trim(e.val()).length){t||n.find(".search-spinner").addSpinner();var u={"q":e.val()};S&&S.reviewTaskIdGetter&&(u.reviewTaskId=S.reviewTaskIdGetter()),$.ajax({"type":"GET","url":"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),"data":u,"dataType":"html"}).done(function(e){var t=$(e).elementNodesOnly().mathjax();if(t.hasClass("show-original"))i.hide(),h(t),r.empty().append(t).show(),t.find(".question .show-title a").attr("target","_blank"),t.find(".post-tag").addClass("user-tag"),o.val(t.find(".question").data("questionid")),s.enable();else{if(!t.hasClass("list-originals"))throw"these are not the results you were looking for";i.empty().append(t).show(),d(i)}}).fail(function(e){var t=e.responseText&&e.responseText.length<100?e.responseText:"An error occurred while searching; please try again";a.text(t),s.disable(),o.val(""),n.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()})}}function h(e,t){var n=$(".close-as-duplicate-pane .original-display").find(".navi-container"),r=e.find(".navi"),i=$("#search-text");if(t)n.empty();else{var a=n.find(".navi");if(1!=a.length)return;a.empty(),$("<a>").text(a.data("abbr")).click(function(){a.html(a.data("text")).siblings().remove(),n.siblings(".preview").hide(),n.siblings(".list-container").show(),$("#original-question-id").val(""),$("#popup-close-question").find(".popup-submit").disable(),$(".close-as-duplicate-pane").find(".search-errors").empty(),i.val(a.data("search-text")).focus()}).appendTo(a)}r.data("search-text",i.val()).text(r.data("text")).prependTo(n)}function f(){var e=T.find(".popup-submit");if(!e.attr("disabled")){$(".remaining-votes").addSpinner({"position":"absolute","margin":"18px 0 0 3px"}),e.disable();var t=function(e,t){return T.find(e+' input[type=radio][name="'+t+'"]:checked').val()};return S&&S.closeSubmitting&&S.closeSubmitting()===!1?(StackExchange.helpers.closePopups(T),void 0):($.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/add".formatUnicorn({"questionId":q}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"closeReasonId":t("#pane-main","close-reason"),"duplicateOfQuestionId":$("#original-question-id").val(),"closeAsOffTopicReasonId":t(".close-as-off-topic-pane","close-as-off-topic-reason"),"belongsOnBaseHostAddress":t(".migration-pane","migration"),"offTopicOtherText":T.find(".off-topic-other-comment-container textarea").val(),"offTopicOtherCommentId":T.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id"),"originalOffTopicOtherText":T.find('.off-topic-other-comment-container input[name="original_text"]').val()}}).done(function(e){m(e)}).fail(function(){C(L,"An error occurred; please try again")}).always(function(){StackExchange.helpers.closePopups(T)}),void 0)}}function g(){L.is(":working")||(L.working(!0).addSpinner({"margin":"0 3px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/reopen/add".formatUnicorn({"questionId":q}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(e){m(e)}).fail(function(){L.working(!1),C(L,"An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function m(e){e.isClose="QuestionClose"==e.FlagType,e.isRecommendClose="QuestionRecommendClose"==e.FlagType,e.isReopen="QuestionReopen"==e.FlagType,e.verb=e.isRecommendClose?"flag":e.isReopen?"reopen":"close";var t=L;e.isClose&&L.is('[class*="flag-post-"]')&&(t=L.parent().find("a[class*='close-question']")),e.Success?v(e,t):w(e,t)}function v(e,t){if(!(S&&S.closeCallback&&S.closeCallback(t,e,e.isRecommendClose))){var n=function(){var e=window.location.href.splitOnLast("#")[0],t="noredirect=1";e.indexOf(t)<0&&(e+=(e.indexOf("?")<0?"?":"&")+"noredirect=1"),window.location.href=e};return e.ResultChangedState?(n(),void 0):("Duplicate"!=e.CloseReason&&e.CloseAsOffTopicReasonId!=B||0!=t.closest(".mod-post-header").length||StackExchange.comments.loadAll(t),e.Tooltip&&t.attr("title",e.Tooltip),e.Message?(b(e,t),void 0):(n(),void 0))}}function b(e,t){var n=(e.Message||"").length<150,r={"transient":n,"css":{"max-width":"600px","line-height":n?"inherit":"25px"}};if(t.parent().showInfoMessage(e.Message,r),!e.isRecommendClose){t=t.closest(".post-menu").find(".close-question-link");var i=t.find(".existing-flag-count");e.Count>0?(0==i.length&&(t.text(t.text()+" "),i=$('<span class="existing-flag-count">').appendTo(t)),i.text(e.Count)):0===e.Count&&i&&(i.remove(),t.attr("title","You retracted your close vote for this question"))}}function w(e,t){var n=e.Message;if(!n)switch(e.verb){case"flag":n="A problem occurred when trying to flag";break;case"reopen":n="A problem occurred when trying to reopen";break;case"close":n="A problem occurred when trying to close"}S&&S.closeErrorCallback&&S.closeErrorCallback(n)||(C(t,n),e.RefreshClient&&setTimeout(function(){location.reload(!0)},2500))}function k(e){!e.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(e.disable().addSpinnerBefore({"position":"absolute","margin":"18px 0 0 -25px"}),$.ajax({"type":"POST","url":"/flags/questions/{questionId}/close/retract".formatUnicorn({"questionId":q}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey}}).done(function(e){b(e,L)}).fail(function(){C(L,"An error occurred; please try again")}).always(function(){StackExchange.helpers.closePopups(T)}))}function x(t){e(),q=t.data("postid"),L=t;var n={"loadedTimestamp":t.data(I)};S&&S.reviewTaskIdGetter&&(n.reviewTaskId=S.reviewTaskIdGetter()),t.loadPopup({"url":"/flags/posts/{postId}/popup".formatUnicorn({"postId":q}),"loaded":y,"data":n,"hideDescriptions":!1,"subformShow":P,"dontShow":S&&S.flagShowPopup,"errorTarget":S?S.errorTarget:null})}function y(e){D=e,N(),D.find(".js-flag-load-close").unbind("click").click(function(){_?_(D,$(this)):O($(this))});var t=D.find("form"),n=StackExchange.settings.flags.allowRetractingFlags?t.attr("data-showretract"):null;t.submit(function(e){return e.preventDefault(),n?F(n):R(),!1}),E(),S&&S.flagShowPopup?S.flagShowPopup(e,L):StackExchange.helpers.bindMovablePopups()}function E(){D.find(".action-list > .disabled-action").each(function(){var e=$(this);e.find("input[type=radio]").attr("disabled","disabled"),e.find(".action-name").addClass("disabled-button")})}function C(e,t,n){var r=S&&S.errorTarget?S.errorTarget:e.parent();n?r.showInfoMessage(t):r.showErrorMessage(t)}function A(e,t){var n=S&&S.errorTarget?S.errorTarget:e.parent();n.showErrorMessage(t,{"type":"warning"})}var S,_,q,L,T,D,B=3,I="loaded-timestamp",N=function(){var e=D.find(".popup-submit"),t=D.find('textarea[name="otherText"]'),n=D.find('input[value="PostOther"]');t.focus(function(){n.is(":checked")||n.attr("checked","checked")}).charCounter({"min":10,"max":500,"setIsValid":function(t){n.is(":checked")&&e.enable(t)}}),n.click(function(){t.focus()})},P=function(e){if(e.is(".mod-attention-subform")){var t=e.find('textarea[name="otherText"]');e.find('input[value="PostOther"]:checked').length>0?t.focus():0==e.find("input:radio:checked").length&&e.closest(".popup").find(".popup-submit").disable()}},O=function(e){var t=D.offset(),r=D.fadeOut("fast").promise();T||(e.siblings(".action-name").addSpinner({"margin":"0 5px"}),r=n(!1)),r.done(function(){l(),e.is(".js-flag-load-close-duplicate")&&T.find("input[value=Duplicate]").click(),StackExchange.options.isMobile||T.css({"top":t.top,"left":t.left}),T.fadeIn("fast")}),D.find(".popup-submit").disable(),e.removeAttr("checked"),D.find(".action-list li").trigger("hide-action")},F=function(e){M("/flags/posts/{postId}/retract/{flagType}",e,"")},R=function(){var e=D.find('textarea[name="otherText"]'),t=function(t){return 1!==t.Outcome?(StackExchange.helpers.closePopups(D),t.Message&&C(L,t.Message,t.Success),!1):(A(e,t.Message,t.Success),!0)},n=D.find('input[name="top-form"]:checked').val(),r="";return"PostOther"==n&&(r=e.val()),S&&S.flagSubmitting&&S.flagSubmitting()===!1?(StackExchange.helpers.closePopups(D),void 0):(M("/flags/posts/{postId}/add/{flagType}",n,r,t),void 0)},M=function(e,t,n,r){D.find(".popup-submit").disable().siblings(".spinner-container").addSpinner(),$.ajax({"type":"POST","url":e.formatUnicorn({"postId":q,"flagType":t}),"dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"otherText":n}}).always(function(){r||StackExchange.helpers.closePopups(D),D.find(".popup-submit").enable().siblings(".spinner-container").removeSpinner()}).done(function(e){r&&r(e)||S&&S.flagCallback&&S.flagCallback(L,e)||(e.ResultChangedState?location.reload(!0):e.Message&&C(L,e.Message,e.Success))}).fail(function(e){StackExchange.helpers.closePopups(D);var t=e.responseText&&e.responseText.length<100?e.responseText:"An error occurred during flagging";C(L,t)})};return{"close_afterLoadListOriginals":d,"updateCloseLinkCount":b,"init":function(e){S||(S=e);var n=".close-question-link, .close-question-button",r=function(e,n){e.preventDefault(),t($(this),!!n)};$("body").off("click",n).on("click",n,r);var i=".flag-post-link, .flag-post-button",a=function(e){e.preventDefault(),x($(this))};$("body").off("click",i).on("click",i,a);var o=Date.now();$(n).add(i).each(function(){var e=$(this);e.data(I)||e.data(I,o)})}}}(),function(){function e(e,t){this.commentId=e,this.jComment=t,this.postUi=s(t)}function t(t,n){n||(c=t),t=t||c||{};for(var r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r])}function n(t){var n=t.constructor===$?t:$(t),r=n.hasClass("comment")?n:n.closest(".comment"),i=r.attr("id").replace(/^comment-/,"");return new e(i,r)}function r(e,t,n){/Android/.test(navigator.userAgent)&&$(t,e).bind("touchstart",function(e){var t=$(e.target);if(!t.is(n))return!0;var r=t.length?$._data(t[0],"events"):null;return r&&r.click&&r.click.length?!0:(t.click(function(){}).attr("data-nothing-to-see-here","X"),!0)})}function i(e,t,i){$(".comments",e).delegate(t,"click",function(){n(this)[i]()}),r(e,".comments",t)}var a,o=StackExchange.comments,s=o.uiForPost;o.extendPostUi({"ensureInput":function(){var e=this.jDiv.find('form[id^="add-comment-"]'),t=this;return e.children().length?(e.add(e.prev()).show(),e.find("textarea")):l(e,"Add Comment",!1,function(){t.submitNewComment()})},"saveEditingComments":function(e){var t=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var r=n(this);if(r.commentId!==e){var i=$(this).find("textarea");t.push([r.commentId,i.val()])}})},"restoreEditingComments":function(){if(this.editingComments){$.each(this.editingComments,function(e,t){var r=t[0],i=t[1],a=$("#comment-"+r);a.length&&n(a).edit(i,!0)}),delete this.editingComments}},"commentsShown":function(){try{var e=this.jDiv.find("form[id^='add-comment-'] textarea:focus");e.length&&StackExchange.comments.tabCompleter.init(e),this.jtBody.data("remaining-comments-count",0)}catch(t){}},"submitNewComment":function(){var e=this.jDiv.find('form[id^="add-comment-"]'),t=e.find("textarea"),n=this;e.is(":working")||(e.working(!0),this.ajax({"type":"POST","url":"/posts/"+this.postId+"/comments","dataType":"html","data":{"comment":t.val(),"fkey":StackExchange.options.user.fkey}},"An error occurred while adding this comment",e).done(function(r){t.val("").keyup().blur(),StackExchange.helpers.enableSubmitButton(e),e.add(e.prev()).hide(),e.find(".message-dismissable").fadeOutAndRemove(),n.showComments(r,null,!1,!0),n.jCommentsLink.show(),$(document).trigger("comment",n.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(e)}).always(function(){e.working(!1)}))},"checkDiscussion":function(){var e=this.jDiv.find("tr.is-comment-discussion"),t=this;if(e.length){e.remove();var n=this.jDiv.find(".comment-form");if(!n.find(".discussion-info").length){{$("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>"+function(e){return"Please avoid extended discussions in comments. Would you like to "+e.aStart+"automatically move this discussion to chat?"}({"aStart":"<a href='#'>"})+"</a></div>").find("a").click(function(e){$(this).unbind("click"),e.preventDefault(),t.ajax({"url":"/posts/"+t.postId+"/move-discussion-to-chat","data":{"fkey":StackExchange.options.user.fkey},"type":"POST"},"An error occurred when trying to move the discussion to chat",n).done(function(e){e.success?window.location.href=e.message:StackExchange.helpers.showErrorMessage(n,e.message)})}).end().prependTo(n)}e.remove()}}}});var u=function(){};e.prototype={"undoVoteUp":u,"voteUp":u,"delete":u,"flag":u,"submitFlag":u,"edit":u,"cancelEdit":u,"submitEdit":u,"submitVote":u,"renderScore":u,"showEdits":u};var c;t({"undoVoteUp":function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var e=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),t=this;this.submitVote(0).done(function(n){return n.Success?(e.closest("tr").siblings("tr").show(),t.renderScore(n.NewScore),e[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",t.postUi.postId),void 0):(e.removeClass("comment-up-off comment-up").addClass("comment-up-on"),void 0)}).fail(function(t){409===t.status&&e.addClass("comment-up-undo"),e.removeClass("comment-up").addClass("comment-up-on")})}},"voteUp":function(){var e=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),t=this;this.submitVote(2).done(function(n){return n.Success?(e.removeClass("comment-up-off"),e.addClass("comment-up-undo"),t.renderScore(n.NewScore),e[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",t.postUi.postId),void 0):(e.removeClass("comment-up-on").addClass("comment-up"),void 0)}).fail(function(){e.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var e=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(t){var n=e.postUi.jDiv.find("textarea");t.Success&&(0!==e.jComment.siblings(".comment").length||n.is(":visible")||e.jComment.closest(".comments").addClass("dno"),e.jComment.remove())})},"flag":function(){function e(e){var n=e.find('textarea[name="other-text"]').charCounter({"min":6,"max":200,"setIsValid":function(){o()}}),r=e.find('input[name="comment-flag-type"]'),i=r.filter('[value="'+n.data("flag-type")+'"]'),a=e.find(".text-counter"),o=function(){var t=r.filter(":checked").length>0;if(i.is(":checked")){var o=!n.is(":visible"),s=n.show().val().length;a.show(),t=s>=6&&200>=s,o&&n.focus()}else n.hide(),a.hide();e.find(".popup-submit").enable(t)};r.click(o),o(),e.find("form").submit(function(){var a=r.filter(":checked").val(),o=i.is(":checked")?n.val():"";return e.fadeOutAndRemove(),t.submitFlag(a,o).done(function(e){if(!e.Success)return e.Message&&t.jComment.find(".comment-flag").closest("td").showErrorMessage(e.Message),void 0;if(e.ResultChangedState)t.jComment.remove();else{var n=t.jComment.find(".comment-up"),r=$("<div/>").addClass("comment-flag").addClass("flag-on").addClass("comment-flag-indicator");r[0].title="You have already flagged this comment",r.text("flag"),n.length?(n.replaceWith(r),t.jComment.find("a.comment-flag").fadeOutAndRemove()):t.jComment.find("a.comment-flag").replaceWith(r)}}),!1})}var t=this;this.jComment.find(".comment-flag").loadPopup({"url":"/flags/comments/{commentId}/popup".formatUnicorn({"commentId":this.commentId}),"loaded":e})},"submitFlag":function(e,t){var n=this.jComment.find(".comment-actions"),r={"type":"POST","url":"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({"commentId":this.commentId,"flagTypeId":e}),"data":{"fkey":StackExchange.options.user.fkey,"otherText":t},"dataType":"json"};return this.postUi.ajax(r,"An error occurred during flagging",n,!0)},"edit":function(e,t){var n=this.jComment,r=n.find('form[id^="edit-comment-"]'),i=this;if(r.length){n.find(" > td > *").not(r).hide(),n.find("td:last").addClass("comment-form"),StackExchange.options.isMobile&&r.addClass("mobile-comment-form");var a=l(r,"Save Edits",!0,function(){i.submitEdit()});a.val(e||r.find("div").text()),a.trigger("charCounterUpdate"),r.show(),t||a.focus()}},"cancelEdit":function(){var e=this.jComment,t=e.find('form[id^="edit-comment-"]');StackExchange.options.isMobile?(t.children("*:not(.dno)").remove(),e.find("td:last").removeClass("mobile-comment-form")):t.children("table").remove(),t.hide(),t.unbind("submit"),t.find(".message").remove(),e.find("td:last").removeClass("comment-form"),e.find(" > td > *").not(t).show()},"submitEdit":function(){var e=this.jComment.find('form[id^="edit-comment-"]'),t=e.find("textarea"),n=t.val(),r=this;this.postUi.ajax({"type":"POST","url":"/posts/comments/"+this.commentId+"/edit","dataType":"html","data":{"comment":n,"fkey":StackExchange.options.user.fkey}},"An error occurred while editing this comment",e).done(function(n){t.val("").keyup().blur(),StackExchange.helpers.enableSubmitButton(e),r.postUi.showComments(n,r.commentId,!1,!0)}).fail(function(){StackExchange.helpers.enableSubmitButton(e)})},"submitVote":function(e,t){var n=this.jComment.find("td:first"),r={"fkey":StackExchange.options.user.fkey};if(t)for(var i in t)r[i]=t[i];var a={"type":"POST","url":"/posts/comments/"+this.commentId+"/vote/"+e,"dataType":"json","data":r,"success":function(e){!e.Success&&e.Message&&StackExchange.helpers.showErrorMessage(n,e.Message)}};return this.postUi.ajax(a,"An error occurred during voting",n,!0)},"renderScore":function(e){var t="";if(e&&e>0){var n=5>e?"":15>=e?"warm":30>=e?"hot":"supernova";t+='<span title="number of \'useful comment\' votes received" class="'+n+'">'+e+"</span>"}this.jComment.find(".comment-score").html(t)},"showEdits":function(){var e=this.jComment,t=$("#comment-"+this.commentId+" .show-edits"),n={"type":"GET","url":"/posts/comments/{commentId}/edit-history".formatUnicorn({"commentId":this.commentId}),"dataType":"html"};this.postUi.ajax(n,null,t.parent()).done(function(t){StackExchange.helpers.showMessage(e,null,{"messageElement":t,"type":"config","relativeToBody":!0,"position":{"my":"top center","at":"bottom center","offsetTop":-10,"offsetLeft":60},"fixedTo$elem":!0})
})}});var l=function(e,t,r,i){var o;o=e.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><br/><input type="submit" value="'+t+'"/>'+(r?' <a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<span class="comment-text"><span class="text-counter"></span></span>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+t+'"/>'+(r?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>',e.append(o),e.find("textarea").attr("placeholder",e.data("placeholdertext")),r&&e.find(".edit-comment-cancel").click(function(){n(e).cancelEdit()});var s=!1,u=function(e){s=e},c=e.find("textarea");return c.charCounter({"min":15,"max":600,"setIsValid":u}).focus(function(){StackExchange.comments.tabCompleter.init($(this))}),e.find(".comment-help-link").click(d),a&&c.one("focus",d),e.submit(function(){return s?(StackExchange.helpers.disableSubmitButton(e),i(e)):e.find("span.text-counter").animate({"opacity":0},100,function(){$(this).animate({"opacity":1},100)}),!1}),StackExchange.settings.comments.doNotSubmitOnEnter||StackExchange.helpers.submitFormOnEnterPress(e),c},d=function(e){var t,n=$(this).closest("tbody"),r=n.find(".comment-help-link"),i=$(".comment-help",n);if("click"==e.type)t=0==i.length||!i.is(":visible"),t||(d.manualOnly=!0);else{if(d.manualOnly)return;t=!0}var a=function(){r.text(t?"hide help":"help")};if(i.length>0)return t?i.slideDown(a):i.slideUp(a),void 0;if(t){var o=$("<tr />").appendTo(n),s=$("<td colspan='2' />").appendTo(o);if(d.helpText)s.html(d.helpText),$(".comment-help",s).slideDown(a);else{if(d.inProgress)return;d.inProgress=!0,StackExchange.helpers.addSpinner(r),s.load("/posts/comment-help",function(e){d.helpText=e,StackExchange.helpers.removeSpinner(),$(".comment-help",this).slideDown(a),d.inProgress=!1})}}},p=o.init;o.init=function(e){p(e),a=e&&e.autoShowCommentHelp;var n=e&&e.post||document;i(n,".comment-up","voteUp"),i(n,".comment-delete,.comment-delete-empty","delete"),i(n,"a.comment-flag","flag"),i(n,".comment-edit","edit"),i(n,".comment-up-undo","undoVoteUp"),i(n,".show-edits","showEdits"),$("form.comment-form-expanded",n).each(function(){s(this).addShow(!0,!0)}),t(null,!0)},o.extendCommentUi=t}(),StackExchange.comments.tabCompleter=function(){function e(e){return StackExchange.helpers.noDiacritics(e.replace(/ /g,"").toLowerCase())}function t(e){var t=$("#tabcomplete");t.empty(),e.length>5||!e.length||$.each(e,function(e,n){var r=$("<li/>").text(n).appendTo(t);n.toLowerCase()==l.toLowerCase()&&r.addClass("chosen")})}function n(){var e=c.caret().start,t=c.val(),n=!1;if(/@[^\s!?();:+"].*@/.test(t)){if(!/`/.test(t))return null;n=!0}var r=t.substring(e).search(/[\s!?();:+"\[\]\\]/);-1==r&&(r=t.length-e),StackExchange.options.site.insertSpaceAfterNameTabCompletion&&0===r&&" "===t.substring(e-1,e)&&(r=-1);var i=t.substring(0,e+r).match(/@[^\s!?();:+"\[\]\\]*$/);if(!i)return null;var a=i[0].substr(1),o=e+r,s=o-a.length;return n&&/@[^\s!?();:+"]/.test(t.substr(0,s-1))?null:{"start":s,"pos":e,"end":o,"name":a}}function r(e){var t=n();if(t.name===e)return c.is(":focus")||c.focus(),void 0;StackExchange.options.site.insertSpaceAfterNameTabCompletion&&(e+=" ");var r=c.val();c.val(r.substring(0,t.start)+e+r.substring(t.end));var i=t.start+e.length;c.caret(i,i)}function i(e){var t,n;if(9==e.which){if(n=$("#tabcomplete li"),!n.length)return;var i=n.filter(".chosen").removeClass("chosen"),a=e.shiftKey?i.prev():i.next();a.length||(a=e.shiftKey?n.last():n.first()),t=a.addClass("chosen").text()}else{if(27!=e.which)return;if(n=$("#tabcomplete li"),!n.length)return;t=l,l=null}e.preventDefault(),r(t)}function a(r){if(r.which)switch(r.which){case 9:case 16:case 17:case 18:case 220:return}var i=n();if(!i)return l=null,t([]),void 0;if(l!=i.name){var a=[];l=i.name;var o;o=i.name?new RegExp("^"+e(i.name).replace(/\./g,"\\."),"i"):/^\W/;for(var s=u.length,c=0;s>c;c++){var d=u[c],p=d.name,h=i.name?e(p):p;h.match(o)&&a.push(p.replace(/ /g,""))}t(a)}}function o(e){return e?parseInt(e.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null:null}function s(e,t,n,r){if(!StackExchange.options.isMobile){var s=t||e.closest("div.comments"),d=n||s.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),p=o(d.attr("href")),h=[];s.find("a.comment-user").each(function(e,t){var n=t.firstChild;if(3!==n.nodeType)return StackExchange.debug.log("unexpected structure in comment owner link"),void 0;var r=n.nodeValue,i=o($(t).attr("href"));i!==StackExchange.options.user.userId&&h.push({"id":i,"name":r})}),u=[];for(var f={},g=h.length-1;g>=0;g--){var m=h[g];f[m.id]||(u.push(m),f[m.id]=!0)}if($("#tabcomplete").remove(),c&&c.unbind($.browser.opera?"keypress":"keydown",i).unbind("keyup click",a),0===u.length||1===u.length&&u[0].id===p)return c=null,void 0;c=e,l=null;var v=$("<ul id='tabcomplete' />");r?r.append(v):v.insertBefore(e),e.bind("keydown",i).bind("keyup click",a)}}var u,c,l=null;return $("body").on("mousedown","#tabcomplete > li",function(){var e=$(this);return e.parent().find("li.chosen").removeClass("chosen"),r(e.addClass("chosen").text()),!1}),{"init":s}}(),StackExchange.inlineEditing={"init":function(){function e(e,t,n,r){t.fadeIn(n,r),e.hide()}function t(e){return"string"==typeof e&&(e=e.replace(/\.{3,}/g,"…"),e=e.replace(/---?(\s)/g,"—$1"),e=e.replace(/"(.*?)"/g,"“$1”")),e}document.referrer&&$("#post-form input[name='referrer']").val(document.referrer),$(document).on("click",".post-menu .edit-post",function(n){if(!(n.ctrlKey||n.altKey||n.metaKey||n.shiftKey)){var r=$(this),i=r.closest(".question, .answer");if(1==r.data("handling-event"))return!1;r.data("handling-event",1),i.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);var a=$("#show-editor-button"),o=a.is(":visible");o&&a.hide(),r.addSpinner();var s="",u=i.hasClass("answer");u&&(s=" class='answer'");var c=i.find(".postcell,.answercell"),l=c.find("> *"),d=$('<div class="inline-editor"/>').hide().appendTo(c);return d.load(r.attr("href")+"-inline",function(n,s){var p;if(d.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))}),StackExchange.helpers.removeSpinner(),i.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(i).offset().top-55},200),"error"==s)StackExchange.helpers.showErrorMessage(c,"The post could not be loaded"),d.remove(),r.data("handling-event",0);else{e(l,d,300);var h=function(t){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}return StackExchange.using("beginEditEvent",function(){StackExchange.beginEditEvent.cancel()}),o&&a.show(),r.data("handling-event",0),e(d,t,300,function(){d.remove()}),t.offset().top<$(window).scrollTop()&&$("html, body").animate({"scrollTop":$(i).offset().top-55},200),!1},f="input keyup",g=function(){x.unbind(f,m),C.trigger(p)},m=function(){return C.trigger(x[0].value),!0};d.find(".cancel-edit").click(function(){g(),h(l)});var v=StackExchange.helpers.DelayedReaction(function(e){$.ajax({"type":"POST","data":{"fkey":StackExchange.options.user.fkey,"hide":e},"url":"/user/save-pref/hide-preview-for-inline-editing"})},1e3,{"sliding":!0}),b=d.find(".hide-preview");b.click(function(){var e=d.find(".wmd-preview"),t=e.is(":visible");return t?(e.slideUp(),b.text("show preview")):(e.slideDown(),b.text("hide preview")),v.trigger(t),!1});var w=d.find('input[type="submit"]'),k=(w.attr("id").replace("submit-button",""),d.find("form")),x=d.find("#title"),y=$("#question-header a"),E=x.data("question-state-suffix");E=E?" "+E:"",p=x.val();var C=StackExchange.helpers.DelayedReaction(function(e){"undefined"!=typeof e&&(y.text(t(e)+E),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,y[0]]))},{"sliding":!0});x.bind(f,m),d.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(e){return e.ctrlKey===!0&&13==e.keyCode?(k.submit(),!1):27==e.keyCode?(g(),h(l),!1):void 0}),StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(k,u?2:1,"edit",!1,function(e){var n=e.html,r=$(n).hide();c.replaceWith(r),u||$("#question-header a").text(t(e.title)),$("html").trigger("inline-edit-complete",[r,e.title]),styleCode(),h(r)})}),StackExchange.using("beginEditEvent",function(){StackExchange.beginEditEvent.init()})}}),!1}})}},StackExchange.tooltips=function(){function e(){}function t(t,n){function r(){if(a++,!(a>=t.length)){var n=t[a],o=$('<div class="user-tooltip"></div>');o.append($('<div class="user-tooltip-message"></div>').html(n.message));var s=!n.dont_show_controls;if(s){var u=$('<div class="user-tooltip-controls"></div>');u.append($('<span class="user-tooltip-disable"></span>').html("<a href='#'>don't show me tips</a>")),a==t.length-1?u.append($('<span class="user-tooltip-done"></span>').html("<a href='#'>done!</a>")):u.append($('<span class="user-tooltip-next"></span>').html("<a href='#'>next >></a>")),u.find(".user-tooltip-next a").click(function(e){return n.evt_on_next&&StackExchange.gps.track(n.evt_on_next,n.evt_on_next_params),n.trackDismiss=!1,r(),e.preventDefault(),!1}),u.find(".user-tooltip-done a").click(function(e){return n.evt_on_done&&StackExchange.gps.track(n.evt_on_done,n.evt_on_done_params),n.trackDismiss=!1,i.remove(),e.preventDefault(),!1}),u.find(".user-tooltip-disable a").click(function(t){return n.evt_on_dismiss_all&&StackExchange.gps.track(n.evt_on_dismiss_all,n.evt_on_dismiss_all_params),n.trackDismiss=!1,i.remove(),e(),t.preventDefault(),!1}),o.append(u)}var c=function(){n.trackDismiss&&n.evt_on_dismiss_msg&&StackExchange.gps.track(n.evt_on_dismiss_msg,n.evt_on_dismiss_msg_params)};i=StackExchange.helpers.showMessage($(n.selector),o,{"dismissable":"x-or-esc","position":n.position,"transient":!1,"type":"info","tip":"top left","dismissing":c}),n.trackDismiss=!0,i.addClass("tooltip-message"),n.evt_on_show&&StackExchange.gps.track(n.evt_on_show,n.evt_on_show_params)}}var i,a=-1;if(n&&n.queryStringTrigger){var o=n.queryStringTrigger+"=";if(window.history&&window.location.search&&-1!=window.location.search.indexOf(o)){var s=window.location.search,u=s.indexOf(o),c=s.indexOf("&",u);-1==c&&(c=s.length-1),c++;var l=s.substring(0,u)+s.substring(c,s.length);l.length>0&&"&"==l[l.length-1]&&(l=l.substring(0,l.length-1));var d=window.location.toString().replace(s,l);window.history.replaceState({},window.title,d)}}r()}return{"startFlight":t}}(),function(){var e=!1;StackExchange.beginEditEvent={"init":function(){function t(e){if(!r){r=!0;var t,n;i?(t=a.find("input#post-params").val().split("|"),n={"PostId":parseInt(t[1]),"owner":parseInt(t[0]),"post_type":StackExchange.options.events.postType.question,"is_suggested_edit":!1,"section":StackExchange.options.events.postEditionSection.tags}):(t=a.attr("data-post-params"),n=JSON.parse(t),n.PostId=parseInt(a.find("input#post-id").val()),n.section=e),StackExchange.options.user.isDeveloper&&(console.log("post.edit_begin event being recorded with params:"),console.log(n)),StackExchange.using("gps",function(){StackExchange.gps.track("post.edit_begin",n)})}}function n(e,n){var r=a.find(e);r.on("keypress",function(e){0===e.which||e.ctrlKey||e.metaKey||e.altKey||t(n)}),r.on("change",function(){t(n)})}if(!e){e=!0;var r=!1,i=!1,a=$("form#edit-tags-form");if(0===a.length?(a=$("form.inline-post"),0===a.length&&(a=$("form.post-form"))):i=!0,!a)return StackExchange.options.user.isDeveloper&&console.error("No form found! No post.edit_begin events will be recorded"),void 0;n("#title",StackExchange.options.events.postEditionSection.title),n("textarea[name='post-text']",StackExchange.options.events.postEditionSection.body),StackExchange.using("tagEditor",function(){n(".tag-editor input[type='text']",StackExchange.options.events.postEditionSection.tags)})}},"cancel":function(){e=!1}}}(),StackExchange.vote_bounty=function(){var e,t=function(t,n,r){var i=$(".bounty-vote");if(r.Success){$(".bounty-notification").remove(),e=!1;var a=t.closest("td.votecell").parent().find("span.reputation-score:last");if(r.Message){var o=$(r.Message);a.text(o.text()).attr("title",o.attr("title"))}var s=t.closest("div.vote").find(".bounty-award-container");if(s.length>1){var u=s.filter(":first").find(".bounty-award"),c=parseInt(u.text(),10),l=parseInt(t.text(),10);u.text("+"+(c+l)),i.remove()}else t.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),i.not(t).remove()}else StackExchange.helpers.showErrorMessage(t.parent(),r.Message),i.removeClass("disabled")},n=function(){return e?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):!0},r=function(e){var r=StackExchange.vote.getPostId(e);n(r)&&($(".bounty-vote").addClass("disabled"),StackExchange.vote.submit({"$target":e,"postId":r,"voteTypeId":StackExchange.vote.voteTypeIds.bountyClose,"success":t}))},i=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")}),$(document).on("click",".bounty-vote:not(.disabled)",function(){r($(this))})},a=function(e,t){return t=$(t||$(".bounty-link")),t=t.off("click",o),e&&t.on("click",o),t},o=function(){var e=a(!1,this),t=$(e).closest(".question").find("div.vote input").val();e.loadPopup({"url":"/posts/bounty/"+t}).always(function(){a(!0,e)})},s=function(){a(!0)};return{"init":function(t){e=!!t.hasOpenBounty,t.canOpenBounty&&s(),t.hasOpenBounty&&i()}}}();